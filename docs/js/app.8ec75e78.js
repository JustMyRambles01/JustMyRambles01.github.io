(function(){var e={2187:function(e,t,n){"use strict";var a=n(9197),s=n(8473),i=n(4887);const r=(0,s.Uk)("Mint"),o=(0,s.Uk)(" | "),l=(0,s.Uk)("My NFTs"),d=(0,s.Uk)(" | "),c=(0,s.Uk)("Explore Collection"),u=(0,s.Uk)(" | "),p=(0,s.Uk)("SVC Cards Game"),h=(0,s.Uk)(" | "),m=(0,s.Uk)("Staking and Leveling Info"),y=(0,s.Uk)(" | "),w=(0,s.Uk)("SVC Tokenomics"),g=(0,s.Uk)(" | "),f={key:0,class:"ri-arrow-down-s-line"},k={key:1,class:"ri-arrow-up-s-line"},b={class:"card-body mt-0 mb-4"},v=(0,s._)("hr",{class:"mt-0 mb-0"},null,-1),T=["href"],_=(0,s.uE)('<a class="dropdown-item mt-0" href="https://app.mistswap.fi/swap?inputCurrency=BCH&amp;outputCurrency=0xE7B1076d0853a7aAa6FbB477886726ed03C6Fffd" target="_blank"> Trade SVC on MistSwap </a><a class="dropdown-item" href="https://dexscreener.com/smartbch/0x83c337dc968fde2ed1b8347768d9970f7a925be7" target="_blank"> Check the SVC price on Dexscreener </a><a class="dropdown-item" href="https://ville.cash/" target="_blank"> Surviville Homepage </a><a class="dropdown-item" href="https://ville.cash/roadmap/" target="_blank"> Surviville Roadmap </a><a class="dropdown-item" href="https://t.me/reaperville" target="_blank"> Talk to us on Telegram </a><a class="dropdown-item" href="https://twitter.com/SurvivilleCoin" target="_blank"> Follow us on Twitter </a>',6),x=["href"],C=["href"],M=(0,s._)("hr",{class:"mt-0 mb-0"},null,-1),P=(0,s._)("hr",{class:"my-4"},null,-1),S=(0,s._)("hr",{class:"my-4"},null,-1);function N(e,t,n,N,A,E){const I=(0,s.up)("router-link"),U=(0,s.up)("router-view");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("nav",{onClick:t[2]||(t[2]=e=>A.expandWalletAddress=!1)},[(0,s.Wm)(I,{to:"/"},{default:(0,s.w5)((()=>[r])),_:1}),o,(0,s.Wm)(I,{to:"/my-reapers"},{default:(0,s.w5)((()=>[l])),_:1}),d,(0,s.Wm)(I,{to:"/all-reapers"},{default:(0,s.w5)((()=>[c])),_:1}),u,(0,s.Wm)(I,{to:"/cards"},{default:(0,s.w5)((()=>[p])),_:1}),h,(0,s.Wm)(I,{to:"/info"},{default:(0,s.w5)((()=>[m])),_:1}),y,(0,s.Wm)(I,{to:"/tokenomics"},{default:(0,s.w5)((()=>[w])),_:1}),g,null!==A.stakersAddressShort?((0,s.wg)(),(0,s.iD)("a",{key:0,onClick:t[0]||(t[0]=(0,a.iM)((e=>A.expandWalletAddress=!A.expandWalletAddress),["stop"]))},[(0,s.Uk)((0,i.zw)(A.stakersAddressShort)+" ",1),!1===A.expandWalletAddress?((0,s.wg)(),(0,s.iD)("i",f)):((0,s.wg)(),(0,s.iD)("i",k))])):((0,s.wg)(),(0,s.iD)("a",{key:1,onClick:t[1]||(t[1]=e=>E.loginMM())}," Login "))]),A.expandWalletAddress?((0,s.wg)(),(0,s.iD)("div",{key:0,onClick:t[4]||(t[4]=e=>A.expandWalletAddress=!1),class:"col-xxl-12 col-xl-12 col-lg-12 col-md-12 col-sm-12"},[(0,s._)("div",b,[v,(0,s._)("a",{class:"dropdown-item",href:"https://oasis.cash/collection/"+A.address["reaper"],target:"_blank"}," Buy or Sell Reaperville NFTs on Oasis ",8,T),_,(0,s._)("a",{class:"dropdown-item",href:"https://www.smartscan.cash/address/"+A.address["reaper"],target:"_blank"}," Inspect Reaperville Contract Activity ",8,x),(0,s._)("a",{class:"dropdown-item",href:"https://www.smartscan.cash/address/"+A.address["svc"],target:"_blank"}," Inspect SVC Contract Activity ",8,C),(0,s._)("span",{onClick:t[3]||(t[3]=(...e)=>E.addRewardTokenToMM&&E.addRewardTokenToMM(...e)),class:"dropdown-item"}," Add Surviville Coin (SVC) to Metamask "),M])])):(0,s.kq)("",!0),A.wrongNetwork?((0,s.wg)(),(0,s.iD)("h4",{key:1,onClick:t[5]||(t[5]=e=>A.expandWalletAddress=!1),class:"animate-characters"},[P,(0,s._)("strong",null,"Please switch the network to "+(0,i.zw)(A.netName)+".",1),S])):(0,s.kq)("",!0),(0,s._)("div",{onClick:t[6]||(t[6]=e=>A.expandWalletAddress=!1)},[(0,s.Wm)(U)])],64)}var A=n(6719),E=n(2616),I={data(){return{stakersAddressShort:null,signer:null,provider:null,expandWalletAddress:!1,address:{},netName:window.netName,wrongNetwork:!1}},mounted:function(){this.address["reaper"]=window.ca["reaper"],this.address["svc"]=window.ca["svc"],this.provider=new E.Q(window.ethereum,"any"),this.provider.getNetwork().then((e=>{e.chainId!==window.netId&&(this.wrongNetwork=!0,window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:A.Dv(window.netId)}]}).catch((e=>{4902===e.code&&window.ethereum.request({method:"wallet_addEthereumChain",params:[{chainName:window.netName,chainId:A.Dv(window.netId),nativeCurrency:{name:"BCH",decimals:18,symbol:"BCH"},rpcUrls:[window.rpcServer],blockExplorerUrls:["https://smartscan.cash/"]}]})})))})),this.provider.on("network",((e,t)=>{t&&window.location.reload()})),this.signer=this.provider.getSigner(),this.signer.getAddress().then((e=>{this.stakersAddressShort=e.substring(0,4)+"..."+e.substring(e.length-4,e.length)}))},methods:{loginMM:function(){window.location.reload()},addRewardTokenToMM:function(){window.ethereum.request({method:"wallet_watchAsset",params:{type:"ERC20",options:{address:window.ca["svc"],symbol:"SVC",decimals:18}}})}}},U=n(5312);const F=(0,U.Z)(I,[["render",N]]);var B=F;const R={class:"content-body"},D={class:"container"},L={class:"col-xxl-12"},z=(0,s._)("p",null,[(0,s.Uk)("SVC Total max. supply: "),(0,s._)("strong",null,"210 million")],-1),H=(0,s._)("h2",null,"Reaperville Staking Statistics",-1),O=(0,s._)("h4",{class:"mt-4"},"Earnable reward tokens:",-1),V=(0,s._)("ul",null,[(0,s._)("li",null,[(0,s._)("strong",null,"5 million in total for Reaperville")]),(0,s._)("li",null,[(0,s._)("p",null,"1 million in first year")]),(0,s._)("li",null,[(0,s._)("p",null,"2.5 million in first 3 years")])],-1),W={class:"mt-4"},Y=(0,s.Uk)(" Total staked power: "),q=(0,s.Uk)(" Base staking power: "),j=(0,s._)("p",null,"Stake and upgrade add 1% to base staking power",-1),$=(0,s._)("p",null,"Unstake adds 5% to base staking power",-1),X=(0,s._)("p",null,"Emergency unstake adds 0% to base staking power",-1),G=(0,s.Uk)(" Reward tokens minted: "),Z=(0,s.Uk)(" Reaperville total emission rate: "),K=(0,s._)("hr",{class:"mt-4 mb-4"},null,-1),Q=(0,s._)("h1",{class:"mx-auto mb-0 mt-4 animate-characters"}," Everything below is ADMIN ONLY ",-1),J=(0,s._)("br",null,null,-1),ee={key:0,class:"mx-auto mt-0 mb-4 animate-characters"},te={key:1,class:"mx-auto mt-0 mb-4 animate-characters"},ne=(0,s._)("hr",{class:"mt-4 mb-4"},null,-1),ae=(0,s._)("h2",null,"Reward Token SVC",-1),se=["disabled"],ie=(0,s.Uk)("   "),re=["disabled"],oe=(0,s._)("hr",null,null,-1),le=(0,s._)("h2",null,"Card Game Contract Balances",-1),de=["disabled"],ce=(0,s.Uk)("   "),ue=["disabled"],pe={class:"mt-4"},he=(0,s._)("h6",null,"Specify SVC to send to or withdraw from the cards contract",-1),me=["disabled"],ye=(0,s.Uk)("   "),we=["disabled"],ge=(0,s._)("br",null,null,-1),fe=(0,s._)("h4",{class:"mt-4"},"Reset Cards Contract",-1),ke=(0,s._)("p",null,"Make sure the contract holds at least 90626 SVC",-1),be=["disabled"],ve=(0,s._)("br",null,null,-1),Te=(0,s._)("h2",{class:"mb-0"},"Reaperville Contract",-1),_e=(0,s.Uk)(" Reaperville contract can still mint "),xe=(0,s.Uk)(" SVC = "),Ce=(0,s.Uk)(" M SVC "),Me=["disabled"],Pe=(0,s.Uk)("   "),Se=["disabled"],Ne=(0,s._)("br",null,null,-1),Ae=(0,s._)("h4",null,"Reaper Contract Balances",-1),Ee=["disabled"],Ie=(0,s._)("br",null,null,-1),Ue=(0,s._)("h4",null,"Reaper Mint Price",-1),Fe=["disabled"],Be=(0,s._)("br",null,null,-1),Re=(0,s._)("h2",{class:"mb-0"},"Pause Reaper Mint",-1),De=["disabled"],Le=(0,s.Uk)("   "),ze=["disabled"],He=(0,s._)("h2",{class:"mb-0"},"Pause Reaper Staking",-1),Oe=["disabled"],Ve=(0,s.Uk)("   "),We=["disabled"],Ye={key:0,class:"popup"},qe={key:0,class:"text-monospace animate-popup"},je=(0,s._)("br",null,null,-1),$e={key:1,class:"text-monospace animate-popup"};function Xe(e,t,n,r,o,l){return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",R,[(0,s._)("div",D,[(0,s._)("div",L,[z,(0,s._)("div",null,[H,O,V,(0,s._)("h4",W,[(0,s._)("p",null,[Y,(0,s._)("strong",null,(0,i.zw)(o.totalStakedPower),1)]),(0,s._)("p",null,[q,(0,s._)("strong",null,(0,i.zw)(o.baseStakingPower)+" == "+(0,i.zw)(Math.round(o.baseStakingPower/o.totalStakedPower*1e4)/100)+"%",1)])]),j,$,X,(0,s._)("h4",null,[(0,s._)("p",null,[G,(0,s._)("strong",null,(0,i.zw)(Math.round((5*10**24-Number(o.tokenMintAllowanceE0["reaper"]))/10**18))+" SVC",1)]),(0,s._)("p",null,[Z,(0,s._)("strong",null,(0,i.zw)(o.rewardTokenEmissionPerHourE18)+" SVC / hour @100% payout",1)]),(0,s._)("p",null," = "+(0,i.zw)(Math.round(24*o.rewardTokenEmissionPerHourE18*365/1e3)/1e3)+" million SVC / year ",1)]),K,Q,J,o.userIsAdmin?((0,s.wg)(),(0,s.iD)("h2",te," (YOU ARE THE ADMIN) ")):((0,s.wg)(),(0,s.iD)("h2",ee," (You are not logged into the admin wallet) ")),ne,ae,(0,s.Uk)(" Update allowance of "+(0,i.zw)(o.newMinterAddress)+" to "+(0,i.zw)(Math.round(o.tokenMintAllowanceE0["newMinter"]/10**18)/1e3)+" k SVC = "+(0,i.zw)(Math.round(o.tokenMintAllowanceE0["newMinter"]/10**21)/1e3)+" M SVC ",1),(0,s.wy)((0,s._)("input",{type:"text",class:"form-control mx-auto","onUpdate:modelValue":t[0]||(t[0]=e=>o.tokenMintAllowanceE0["newMinter"]=e)},null,512),[[a.nr,o.tokenMintAllowanceE0["newMinter"]]]),(0,s.wy)((0,s._)("input",{id:"newMinterAddress",type:"text",class:"form-control mx-auto","onUpdate:modelValue":t[1]||(t[1]=e=>o.newMinterAddress=e)},null,512),[[a.nr,o.newMinterAddress]]),(0,s._)("button",{class:"btn btn-success",disabled:!o.userIsAdmin,onClick:t[2]||(t[2]=e=>l.getTokenMintAllowance("svc","newMinter"))}," Load allowance of "+(0,i.zw)(o.newMinterAddress),9,se),ie,(0,s._)("button",{class:"btn btn-danger",disabled:!o.userIsAdmin,onClick:t[3]||(t[3]=e=>l.setMintAllowanceByCa(o.newMinterAddress,o.tokenMintAllowanceE0["newMinter"]))}," Update allowance to "+(0,i.zw)(Math.round(o.tokenMintAllowanceE0["newMinter"]/10**21)/1e3)+" M SVC ",9,re),oe,le,(0,s._)("p",null,(0,i.zw)(Math.round(o.bchBalanceE0["cards"]/10**15)/1e3)+" BCH ",1),(0,s._)("p",null,(0,i.zw)(Math.round(o.tokenBalanceE0["cards"]/10**15)/1e3)+" SVC = "+(0,i.zw)(Math.round(o.tokenBalanceE0["cards"]/10**18)/1e3)+" k SVC ",1),(0,s._)("div",null,[(0,s._)("button",{class:"btn btn-std",type:"button",disabled:o.bchBalanceE0["cards"]<=0||!o.userIsAdmin,onClick:t[4]||(t[4]=e=>l.withdrawBchFromContract("cards"))}," withdraw all BCH ",8,de),ce,(0,s._)("button",{class:"btn btn-danger",type:"button",disabled:o.tokenBalanceE0["cards"]<=0||!o.userIsAdmin,onClick:t[5]||(t[5]=e=>l.withdrawTokenFromContract("svc","cards"))}," withdraw all SVC ",8,ue)]),(0,s._)("div",pe,[he,(0,s.wy)((0,s._)("input",{type:"number",class:"form-control mx-auto","onUpdate:modelValue":t[6]||(t[6]=e=>o.svc2WithdrawOrSendE18=e)},null,512),[[a.nr,o.svc2WithdrawOrSendE18]]),(0,s._)("button",{class:"btn btn-std",type:"button",disabled:o.tokenBalanceE0["cards"]<=0||!o.userIsAdmin,onClick:t[7]||(t[7]=e=>l.withdrawSvcFromCards(o.svc2WithdrawOrSendE18))}," withdraw "+(0,i.zw)(o.svc2WithdrawOrSendE18/1e3)+" k SVC ",9,me),ye,(0,s._)("button",{class:"btn btn-std",type:"button",disabled:o.tokenBalanceE0["user"]<=0,onClick:t[8]||(t[8]=e=>l.sendSvcToCards(o.svc2WithdrawOrSendE18))}," send "+(0,i.zw)(o.svc2WithdrawOrSendE18/1e3)+" k SVC ",9,we),ge,(0,s.Uk)(" Your wallet holds "+(0,i.zw)(Math.round(o.tokenBalanceE0["user"]/10**15)/1e3)+" SVC ",1)]),(0,s._)("div",null,[fe,ke,(0,s._)("p",null,"Contract address: "+(0,i.zw)(o.cardsCa),1),(0,s._)("button",{class:"btn btn-danger",type:"button",disabled:!o.userIsAdmin,onClick:t[9]||(t[9]=e=>l.resetContract("cards"))}," Reset contract for new round ",8,be)]),ve,Te,(0,s._)("div",null,[_e,(0,s._)("strong",null,(0,i.zw)(Math.round(o.tokenMintAllowanceE0["reaper"]/10**18)),1),xe,(0,s._)("strong",null,(0,i.zw)(Math.round(o.tokenMintAllowanceE0["reaper"]/10**21)/1e3),1),Ce]),(0,s.wy)((0,s._)("input",{type:"text",class:"form-control mx-auto","onUpdate:modelValue":t[10]||(t[10]=e=>o.tokenMintAllowanceE0["reaper"]=e)},null,512),[[a.nr,o.tokenMintAllowanceE0["reaper"]]]),(0,s._)("div",null,[(0,s._)("button",{class:"btn btn-success",disabled:!o.userIsAdmin,onClick:t[11]||(t[11]=e=>l.getTokenMintAllowance("svc","reaper"))}," Load allowance of Reaperville ",8,Me),Pe,(0,s._)("button",{class:"btn btn-danger",disabled:!o.userIsAdmin,onClick:t[12]||(t[12]=e=>l.setMintAllowance("reaper",o.tokenMintAllowanceE0["reaper"]))}," Update allowance to "+(0,i.zw)(Math.round(o.tokenMintAllowanceE0["reaper"]/10**21)/1e3)+" M SVC ",9,Se)]),Ne,Ae,(0,s._)("p",null,(0,i.zw)(Math.round(o.bchBalanceE0["reaper"]/10**15)/1e3)+" BCH ",1),(0,s._)("div",null,[(0,s._)("button",{class:"btn btn-std",type:"button",disabled:o.bchBalanceE0["reaper"]<=0||!o.userIsAdmin,onClick:t[13]||(t[13]=e=>l.withdrawBchFromContract("reaper"))}," withdraw BCH ",8,Ee)]),Ie,Ue,(0,s._)("p",null,(0,i.zw)(Math.round(o.bchPerNftE0/10**12)/10**6)+" BCH ",1),(0,s.wy)((0,s._)("input",{id:"bchPerNftE0",type:"text",class:"form-control mx-auto","onUpdate:modelValue":t[14]||(t[14]=e=>o.bchPerNftE0=e)},null,512),[[a.nr,o.bchPerNftE0]]),(0,s._)("div",null,[(0,s._)("button",{class:"btn btn-std",disabled:!o.userIsAdmin,type:"button",onClick:t[15]||(t[15]=e=>l.setBchPerNftE0("reaper"))}," set new price "+(0,i.zw)(Math.round(o.bchPerNftE0/10**12)/10**6)+" BCH ",9,Fe)]),Be,Re,(0,s.Uk)(" Mint is active: "+(0,i.zw)(!o.mintPaused)+" ",1),(0,s._)("p",null,[(0,s._)("button",{onClick:t[16]||(t[16]=e=>l.setNftMintPaused(!0)),disabled:o.mintPaused||!o.userIsAdmin,class:"btn btn-danger"}," Pause ",8,De),Le,(0,s._)("button",{onClick:t[17]||(t[17]=e=>l.setNftMintPaused(!1)),disabled:!o.mintPaused||!o.userIsAdmin,class:"btn btn-success"}," Unpause ",8,ze)]),He,(0,s.Uk)(" Staking is active: "+(0,i.zw)(!o.stakingPaused)+" ",1),(0,s._)("p",null,[(0,s._)("button",{onClick:t[18]||(t[18]=e=>l.setNftStakingPaused("reaper",!0)),disabled:o.stakingPaused||!o.userIsAdmin,class:"btn btn-danger"}," Pause ",8,Oe),Ve,(0,s._)("button",{onClick:t[19]||(t[19]=e=>l.setNftStakingPaused("reaper",!1)),disabled:!o.stakingPaused||!o.userIsAdmin,class:"btn btn-success"}," Unpause ",8,We)])])])])]),o.txInProgress||""!=o.feedbackMessage?((0,s.wg)(),(0,s.iD)("div",Ye,[(0,s._)("div",{class:"popupX",onClick:t[20]||(t[20]=e=>{o.feedbackMessage="",o.txInProgress=!1})}," x "),""!=o.feedbackMessage?((0,s.wg)(),(0,s.iD)("h4",qe,(0,i.zw)(o.feedbackMessage),1)):(0,s.kq)("",!0),je,o.txInProgress?((0,s.wg)(),(0,s.iD)("h5",$e," Waiting for current transaction to finish... ")):(0,s.kq)("",!0)])):(0,s.kq)("",!0)],64)}var Ge=n(1946),Ze=n(4049),Ke=JSON.parse('{"Mt":[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[],"name":"MAX_SUPPLY","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"burn","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"burnFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"subtractedValue","type":"uint256"}],"name":"decreaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"addedValue","type":"uint256"}],"name":"increaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_to","type":"address"},{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"mint","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_addressToCheck","type":"address"}],"name":"remainingMintersAllowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_addressToRemove","type":"address"}],"name":"removeMinter","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_addressToAdd","type":"address"},{"internalType":"uint256","name":"_newAllowance","type":"uint256"}],"name":"updateMintersAllowance","outputs":[],"stateMutability":"nonpayable","type":"function"}]}'),Qe=JSON.parse('{"Mt":[{"inputs":[{"internalType":"contract RewardToken","name":"_rewardToken","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"approved","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":false,"internalType":"bool","name":"approved","type":"bool"}],"name":"ApprovalForAll","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"uint32","name":"_newBaseStakingPower","type":"uint32"}],"name":"adjustBaseStakingPower","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"approve","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"baseExtension","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"baseURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"bchPerNft","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"costPerLevel","outputs":[{"internalType":"uint16","name":"","type":"uint16"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint16[]","name":"tokenIdArr","type":"uint16[]"}],"name":"emergencyUnstake","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getApproved","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint16","name":"_tokenId","type":"uint16"}],"name":"getLevelView","outputs":[{"internalType":"uint8","name":"level","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"harvest","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"isMintPausedStakingPaused","outputs":[{"internalType":"bool[2]","name":"","type":"bool[2]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint16","name":"_startId","type":"uint16"},{"internalType":"uint16","name":"_endId","type":"uint16"}],"name":"levelsForTokenIds","outputs":[{"internalType":"uint16[]","name":"","type":"uint16[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint8","name":"_mintAmount","type":"uint8"}],"name":"mint","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint8","name":"_mintAmount","type":"uint8"},{"internalType":"address","name":"_receiver","type":"address"}],"name":"mintForAddress","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ownerOf","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"royaltiesPctX100","outputs":[{"internalType":"uint16","name":"","type":"uint16"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"royaltiesReceiver","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_tokenId","type":"uint256"},{"internalType":"uint256","name":"_salePrice","type":"uint256"}],"name":"royaltyInfo","outputs":[{"internalType":"address","name":"receiver","type":"address"},{"internalType":"uint256","name":"royaltyAmount","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"bytes","name":"data","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"bool","name":"approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"_newBaseURI","type":"string"}],"name":"setBaseURI","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_newBchPerNft","type":"uint256"}],"name":"setBchPerNft","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint16","name":"_newCostPerLevel","type":"uint16"}],"name":"setCostPerLevel","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bool","name":"_newPaused","type":"bool"}],"name":"setMintPaused","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint16","name":"_newRoyaltiesPctX100","type":"uint16"}],"name":"setRoyaltiesPercentageTimesHundred","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newRoyaltiesReceiver","type":"address"}],"name":"setRoyaltiesReceiver","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bool","name":"_newPaused","type":"bool"}],"name":"setStakingPaused","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"staker","type":"address"}],"name":"showStakerInfo","outputs":[{"internalType":"uint256[5]","name":"stkd4Scnds_stkrPwr_ttlPwr_basePwr_lastIdx_emmPh","type":"uint256[5]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_staker","type":"address"}],"name":"showStakersEarningsAfterLastTimestamp","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_staker","type":"address"}],"name":"showStakersEarningsUntilLastTimestamp","outputs":[{"internalType":"uint256","name":"earned","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint16[]","name":"tokenIdArr","type":"uint16[]"}],"name":"stake","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"index","type":"uint256"}],"name":"tokenByIndex","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"uint256","name":"index","type":"uint256"}],"name":"tokenOfOwnerByIndex","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"tokenURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"transferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint16[]","name":"tokenIdArr","type":"uint16[]"}],"name":"unstake","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint16[]","name":"tokenIdArr","type":"uint16[]"},{"internalType":"uint8[]","name":"levelIncArr","type":"uint8[]"}],"name":"upgradeLevel","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_owner","type":"address"}],"name":"walletOfOwner","outputs":[{"internalType":"uint16[]","name":"","type":"uint16[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_owner","type":"address"},{"internalType":"uint16","name":"_maxNftsToReturn","type":"uint16"},{"internalType":"uint16","name":"_slice","type":"uint16"}],"name":"walletOfOwnerWithLevels","outputs":[{"internalType":"uint16[]","name":"","type":"uint16[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"withdraw","outputs":[],"stateMutability":"nonpayable","type":"function"}]}'),Je=JSON.parse('{"Mt":[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"inputs":[{"internalType":"address[]","name":"_tokenCA","type":"address[]"}],"name":"getInfo","outputs":[{"internalType":"uint32[]","name":"","type":"uint32[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_cards2Play","type":"uint256"}],"name":"playWithBch","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_cards2Play","type":"uint256"},{"internalType":"address","name":"_tokenCA","type":"address"},{"internalType":"uint256","name":"costToken","type":"uint256"}],"name":"playWithToken","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_cards2Play","type":"uint256"},{"internalType":"address","name":"_tokenCA","type":"address"},{"internalType":"uint256","name":"costToken","type":"uint256"}],"name":"playWithTokenWithSpecialDiscount","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"remainingDiscounts","outputs":[{"internalType":"uint16","name":"","type":"uint16"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_caToRemove","type":"address"}],"name":"removePaymentToken","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"reset","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint16","name":"_newBchPerCardE13","type":"uint16"}],"name":"setBchPerCardE13","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_tokenCA","type":"address"},{"internalType":"uint32","name":"_newPriceMilliToken","type":"uint32"}],"name":"setNewPriceToken","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint8","name":"_newPaused_0IsUnpaused","type":"uint8"}],"name":"setPaused","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint8","name":"newSpecialDiscountX250","type":"uint8"},{"internalType":"address[]","name":"_wallets","type":"address[]"},{"internalType":"uint16[]","name":"_remainingDiscounts","type":"uint16[]"}],"name":"setSpecialDiscounts","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address[]","name":"_wallets","type":"address[]"}],"name":"showSpecialDiscounts","outputs":[{"internalType":"uint32[]","name":"","type":"uint32[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"withdrawBch","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"withdrawSvc","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_ca","type":"address"}],"name":"withdrawToken","outputs":[],"stateMutability":"nonpayable","type":"function"}]}'),et={name:"App",components:{},data(){return{contracts:{},newMinterAddress:"",userIsAdmin:!1,userAddress:null,bchBalanceE0:{},tokenMintAllowanceE0:{},tokenBalanceE0:{},svc2WithdrawOrSendE18:1e3,stakingPaused:!1,totalStakedPower:0,baseStakingPower:0,rewardTokenEmissionPerHourE18:0,mintPaused:!1,bchPerNftE0:"0",cardsCa:window.ca["cards"],feedbackMessage:"",txInProgress:!1}},methods:{setFeedback:function(e,t){let n=this;n.feedbackMessage=e,n.lastTimeout>0&&clearTimeout(n.lastTimeout),t>0&&(n.lastTimeout=setTimeout((function(){n.feedbackMessage=""}),t))},mintRewardToken:async function(e,t){let n=await this.contracts["svc"].mint(e,Ze.vz(t.toString(),"ether"));await n.wait()},setNftMintPaused:async function(e){let t=await this.contracts["reaper"].setMintPaused(e);await t.wait(),window.location.reload()},setNftStakingPaused:async function(e,t){let n=await this.contracts[e].setStakingPaused(t);await n.wait(),window.location.reload()},setBchPerNftE0:async function(e){let t=await this.contracts[e].setBchPerNft(String(this.bchPerNftE0));await t.wait(),window.location.reload()},withdrawBchFromContract:async function(e){let t=await this.contracts[e].withdrawBch();await t.wait(),window.location.reload()},withdrawTokenFromContract:async function(e,t){let n=await this.contracts[t].withdrawToken(window.ca[e]);await n.wait(),window.location.reload()},withdrawSvcFromCards:async function(e){const t=e.toString()+"000000000000000000";let n=await this.contracts["cards"].withdrawSvc(t);await n.wait(),window.location.reload()},sendSvcToCards:async function(e){const t=e.toString()+"000000000000000000";let n=await this.contracts["svc"].transfer(window.ca["cards"],t);await n.wait(),window.location.reload()},resetContract:async function(e){console.log(this.tokenBalanceE0["cards"].slice(0,5)),console.log(this.tokenBalanceE0["cards"].length);let t=this.tokenBalanceE0["cards"].length;if(t<23||Number(this.tokenBalanceE0["cards"].slice(0,t-18))<90626)return this.setFeedback("not enough SVC on contract",2e3),!1;let n=await this.contracts[e].reset();await n.wait(),window.location.reload()},setMintAllowanceByCa:async function(e,t){let n;n=0===t?await this.contracts["svc"].removeMinter(e):await this.contracts["svc"].updateMintersAllowance(e,t),await n.wait(),window.location.reload()},setMintAllowance:async function(e,t){let n="newMinter"===e?this.newMinterAddress:window.ca[e];this.setMintAllowanceByCa(n,t)},getTokenMintAllowance:async function(e,t){let n=window.ca[t];"newMinter"===t&&(n=this.newMinterAddress),this.contracts[e].remainingMintersAllowance(n).then((e=>{this.tokenMintAllowanceE0[t]=String(e)}))},getTokenBalance:async function(e,t){this.contracts[e].balanceOf(window.ca[t]).then((e=>{this.tokenBalanceE0[t]=String(e)}))},getBchBalance:async function(e){this.provider.getBalance(window.ca[e]).then((t=>{this.bchBalanceE0[e]=String(t)}))}},mounted:function(){this.provider=new E.Q(window.ethereum,"any"),this.provider.send("eth_requestAccounts",[]).then((()=>{this.signer=this.provider.getSigner(),this.contracts["svc"]=new Ge.CH(window.ca["svc"],Ke.Mt,this.signer),this.contracts["reaper"]=new Ge.CH(window.ca["reaper"],Qe.Mt,this.signer),this.contracts["cards"]=new Ge.CH(window.ca["cards"],Je.Mt,this.signer)})).then((()=>{this.signer.getAddress().then((e=>{this.userAddress=e,e===window.ca["dev"]&&(this.userIsAdmin=!0),this.newMinterAddress=e,this.getTokenMintAllowance("svc","newMinter")})).then((()=>{this.contracts["svc"].balanceOf(this.userAddress).then((e=>{this.tokenBalanceE0["user"]=String(e)}))})),this.contracts["reaper"].showStakerInfo(window.ca["dev"]).then((e=>{this.totalStakedPower=e[2],this.baseStakingPower=e[3],this.rewardTokenEmissionPerHourE18=String(Math.round(1e5*Ze.dF(e[4]))/1e5)}));const e=["reaper","cards"];for(let t of e)this.getBchBalance(t),this.getTokenBalance("svc",t);this.getTokenMintAllowance("svc","reaper"),this.contracts["reaper"].isMintPausedStakingPaused().then((e=>{this.mintPaused=e[0],this.stakingPaused=e[1]})),this.contracts["reaper"].bchPerNft().then((e=>{this.bchPerNftE0=String(e)}))}))}};const tt=(0,U.Z)(et,[["render",Xe]]);var nt=tt;const at={class:"text-center container col-lg-8 col-md-9 col-sm-10 mx-auto mt-2 mb-4"},st=(0,s.uE)('<h1 class="animate-characters">The Reaperville NFT Collection</h1><h4 class="text-muted"> This collection of colorful reapers is the first NFT collection of the Surviville project. <a target="_blank" href="https://ville.cash/">Learn more about Surviville.</a></h4><div class="col-xxl-4 mx-auto mt-4 mb-4"><img src="/images/avatar/preview.gif" class="img-fluid rounded" alt="Reaperville NFTs Preview"></div>',3),it={class:"text-muted"},rt=(0,s.Uk)(" After minting some Reaperville NFTs, you can stake them "),ot=(0,s.Uk)("here"),lt=(0,s.Uk)(" to earn a passive income stream of Surviville coins. These coins can be used to permanently upgrade the level of your NFTs in order to increase their staking power. "),dt=(0,s._)("h4",{class:"text-muted"}," In the future, more use cases will follow — such as giving your NFTs custom names and participating in winning opportunities. ",-1),ct=(0,s._)("br",null,null,-1),ut=(0,s._)("h4",{class:"lead text-muted mx-auto my-3"},[(0,s._)("span",null,"You can mint up to 40 NFTs per transaction. "),(0,s._)("span",null,"The NFTs are minted in a non-sequential, randomised order.")],-1),pt={class:"mx-auto my-4",id:"nftsMinted"},ht={href:"#nftsMinted"},mt=(0,s._)("h4",{class:"lead text-muted mx-auto my-3"},[(0,s._)("span",null,"Please select how many Reaperville NFTs you want to mint.")],-1),yt={class:"mb-3 mx-auto"},wt={class:"input-group mx-auto"},gt={class:"input-group-prepend mx-auto"},ft=(0,s.Uk)("   "),kt=(0,s.Uk)("   "),bt=(0,s.Uk)("   "),vt=(0,s.Uk)("   "),Tt=(0,s.Uk)("   "),_t=(0,s.Uk)("   "),xt=(0,s.Uk)("   "),Ct={class:"mb-3 mx-auto"},Mt={class:"input-group mx-auto"},Pt={class:"input-group-prepend mx-auto"},St=["disabled"],Nt={class:"col-lg-8 col-md-8 col-sm-8 mx-auto"},At=["max"],Et=["disabled"],It={class:"row-lg-12"},Ut={class:"column"},Ft={key:0},Bt={key:1},Rt={class:"col-lg-6 col-md-8 mx-auto"},Dt=["disabled"],Lt={key:1,class:"mt-4"},zt=(0,s.Uk)(" All Reaperville NFTs have been minted. Visit "),Ht=["href"],Ot=(0,s.Uk)(" to check if there are some for sale! "),Vt=(0,s._)("br",null,null,-1),Wt={class:"mt-4"},Yt=(0,s._)("br",null,null,-1),qt={class:"text-muted mt-2"},jt=(0,s._)("h6",{class:"mx-auto text-muted"},[(0,s._)("span",null,"Note that transactions cannot be undone.")],-1),$t={key:0,class:"popup"},Xt={key:0,class:"text-monospace animate-popup"},Gt=(0,s._)("br",null,null,-1),Zt={key:1,class:"text-monospace animate-popup"};function Kt(e,t,n,r,o,l){const d=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("section",at,[st,(0,s._)("h4",it,[rt,(0,s.Wm)(d,{to:"/my-reapers"},{default:(0,s.w5)((()=>[ot])),_:1}),lt]),dt,ct,o.nftsMinted<o.nftsToMintTotal?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[(0,s._)("h2",null,"For "+(0,i.zw)(o.bchPerNft/10**18)+" BCH you can mint 1 NFT.",1),ut,(0,s._)("h2",pt,[(0,s._)("span",null,(0,i.zw)(o.nftsMinted)+" of "+(0,i.zw)(o.nftsToMintTotal)+" NFTs have been minted.",1),(0,s._)("a",ht,[(0,s._)("i",{title:"Reload numbers",onClick:t[0]||(t[0]=e=>l.load()),class:"ri-refresh-fill"})])]),mt,(0,s._)("div",yt,[(0,s._)("div",wt,[(0,s._)("div",gt,[(0,s._)("button",{class:"btn btn-std",type:"button",onClick:t[1]||(t[1]=e=>l.setNftsToMint(1))}," 1 "),ft,(0,s._)("button",{class:"btn btn-std",type:"button",onClick:t[2]||(t[2]=e=>l.setNftsToMint(5))}," 5 "),kt,(0,s._)("button",{class:"btn btn-std",type:"button",onClick:t[3]||(t[3]=e=>l.setNftsToMint(10))}," 10 "),bt,(0,s._)("button",{class:"btn btn-std",type:"button",onClick:t[4]||(t[4]=e=>l.setNftsToMint(15))}," 15 "),vt,(0,s._)("button",{class:"btn btn-std",type:"button",onClick:t[5]||(t[5]=e=>l.setNftsToMint(20))}," 20 "),Tt,(0,s._)("button",{class:"btn btn-std",type:"button",onClick:t[6]||(t[6]=e=>l.setNftsToMint(25))}," 25 "),_t,(0,s._)("button",{class:"btn btn-std",type:"button",onClick:t[7]||(t[7]=e=>l.setNftsToMint(30))}," 30 "),xt,(0,s._)("button",{class:"btn btn-std",type:"button",onClick:t[8]||(t[8]=e=>l.setNftsToMint(40))}," 40 ")])])]),(0,s._)("div",Ct,[(0,s._)("div",Mt,[(0,s._)("div",Pt,[(0,s._)("button",{class:"btn btn-std",disabled:o.nftsToMint<=1,onClick:t[9]||(t[9]=e=>l.changeNftsToMint(-1))}," - ",8,St),(0,s._)("div",Nt,[(0,s.wy)((0,s._)("input",{id:"tokensToBuy",type:"number",min:"1",max:o.maxNftsPerTx,class:"form-control mx-auto",onChange:t[10]||(t[10]=e=>l.changeNftsToMint(0)),"onUpdate:modelValue":t[11]||(t[11]=e=>o.nftsToMint=e)},null,40,At),[[a.nr,o.nftsToMint]])]),(0,s._)("button",{class:"btn btn-std",disabled:o.nftsToMint>=o.maxNftsPerTx,onClick:t[12]||(t[12]=e=>l.changeNftsToMint(1))}," + ",8,Et)])])]),(0,s._)("span",It,[(0,s._)("span",Ut,[o.nftsToMint>1?((0,s.wg)(),(0,s.iD)("h4",Ft," Mint "+(0,i.zw)(o.nftsToMint)+" Reaperville NFTs for: ",1)):((0,s.wg)(),(0,s.iD)("h4",Bt,"Mint 1 Reaperville NFT for:")),(0,s._)("div",Rt,[(0,s._)("button",{id:"buyButtonBch",type:"button",class:"btn btn-std my-2 btn-large",disabled:o.mintPaused||o.bchPerNft<=0,onClick:t[13]||(t[13]=(...e)=>l.mintNFTsWithBCH&&l.mintNFTsWithBCH(...e))},(0,i.zw)(Math.round(o.nftsToMint*o.bchPerNft/10**12)/10**6)+" BCH ",9,Dt)])])])],64)):((0,s.wg)(),(0,s.iD)("h2",Lt,[zt,(0,s._)("a",{href:"https://oasis.cash/collection/"+o.mintContractAddress,target:"_blank"},"Oasis.cash",8,Ht),Ot])),Vt,(0,s._)("h3",Wt,[(0,s._)("span",null,"Your Balance: "+(0,i.zw)(Math.round(o.stakersBchBalance/10**15)/1e3)+" BCH ",1)]),(0,s._)("h3",null,"You hold "+(0,i.zw)(o.nftsOwned)+" Reaperville NFTs in your wallet.",1),Yt,(0,s._)("h6",qt,[(0,s._)("span",null,"The gas limit is set to "+(0,i.zw)(o.gasLimit)+" to ensure a successful mint. Unused gas is automatically returned to your wallet. If you lower the gas limit, you risk having failed transactions. If a transaction fails, the gas fee is lost.",1)]),jt]),""!=o.feedbackMessage||o.txInProgress?((0,s.wg)(),(0,s.iD)("div",$t,[(0,s._)("div",{class:"popupX",onClick:t[14]||(t[14]=e=>{o.feedbackMessage="",o.txInProgress=!1})}," x "),""!=o.feedbackMessage?((0,s.wg)(),(0,s.iD)("h4",Xt,(0,i.zw)(o.feedbackMessage),1)):(0,s.kq)("",!0),Gt,o.txInProgress?((0,s.wg)(),(0,s.iD)("h4",Zt," Please wait for the transaction to finish! ")):(0,s.kq)("",!0)])):(0,s.kq)("",!0)],64)}var Qt=n(8391),Jt={name:"App",components:{},data(){return{provider:null,signer:null,stakersAddress:"",stakersBchBalance:0,feedbackMessage:"",txInProgress:!1,lastTimeout:0,mintContract:null,mintContractAddress:window.ca["reaper"],mintPaused:!0,nftsToMint:10,maxNftsPerTx:40,bchPerNft:2e16,nftsMinted:0,nftsOwned:0,nftsToMintTotal:2500,gasLimit:25e4}},methods:{setFeedback:function(e,t){let n=this;n.feedbackMessage=e,n.lastTimeout>0&&clearTimeout(n.lastTimeout),t>0&&(n.lastTimeout=setTimeout((function(){n.feedbackMessage=""}),t))},getBchBalance:function(){this.provider.getBalance(this.stakersAddress).then((e=>{this.stakersBchBalance=e}))},setNftsToMint:function(e){this.feedbackMessage="",this.nftsToMint=Math.floor(e),this.nftsToMint<1?this.nftsToMint=1:this.nftsToMint>this.maxNftsPerTx&&(this.nftsToMint=this.maxNftsPerTx)},changeNftsToMint:function(e){this.feedbackMessage="",this.nftsToMint=Math.floor(this.nftsToMint)+e,this.nftsToMint<1?this.nftsToMint=1:this.nftsToMint>this.maxNftsPerTx&&(this.nftsToMint=this.maxNftsPerTx)},mintNFTsWithBCH:async function(){await this.load();let e=this.nftsToMintTotal-this.nftsMinted;if(this.nftsToMint>e)return this.feedbackMessage=`There are only ${e} NFTs available for minting!`,this.maxNftsPerTx=e,!1;let t,n=this.bchPerNft*this.nftsToMint,a=Math.min(1e7,this.gasLimit+(this.gasLimit-25e3)*(this.nftsToMint-1));if(console.log("totalCostBchWei: ",n),console.log("Gas limit: ",a),this.stakersBchBalance<n+a)return this.feedbackMessage=`You have ${Math.round(this.stakersBchBalance/10**14)/1e4} BCH in your wallet. You can mint up to ${Math.round(this.stakersBchBalance/Number(this.bchPerNft)-.5)} NFTs with that.`,!1;this.feedbackMessage="Minting your NFTs.",this.txInProgress=!0;try{t=await this.mintContract.mint(this.nftsToMint,{value:n.toString(),gasLimit:a.toString()}),console.log(t),await t.wait(),console.log(t)}catch(i){return this.setFeedback("An error occured. Please try again later.",2e3),this.txInProgress=!1,!1}console.log("tx hash:",t.hash);const s=await this.provider.getTransaction(t.hash);try{let e=await this.provider.call(s,s.blockNumber);console.log(e),"0x"==e&&(this.setFeedback("Congratulations! You successfully minted some NFTs! Visit the staking website to take a look at your NFTs.",2e3),this.txInProgress=!1)}catch(i){this.setFeedback("An error occured.\nPlease try again later.",2e3),this.txInProgress=!1;const e=i.data.replace("Reverted ","");console.log({err:i});let t=Qt.ZN("0x"+e.substr(138));console.log("revert reason:",t)}this.load()},load:async function(){this.signer.getAddress().then((e=>{this.stakersAddress=e,this.getBchBalance(),this.mintContract.balanceOf(e).then((e=>{this.nftsOwned=e}))})),this.mintContract.isMintPausedStakingPaused().then((e=>{this.mintPaused=e[0]})),this.mintContract.bchPerNft().then((e=>{this.bchPerNft=e})),this.mintContract.totalSupply().then((e=>{this.nftsMinted=e}))}},mounted:function(){this.provider=new E.Q(window.ethereum,"any"),this.provider.send("eth_requestAccounts",[]).then((()=>{this.signer=this.provider.getSigner(),this.mintContract=new Ge.CH(window.ca["reaper"],Qe.Mt,this.signer)})).then((()=>{this.load()}))}};const en=(0,U.Z)(Jt,[["render",Kt]]);var tn=en,nn=n(4731);function an(e,t,n,a,i,r){const o=(0,s.up)("NftTop"),l=(0,s.up)("Nft");return(0,s.wg)(),(0,s.iD)("div",{class:"content-body",onClick:t[0]||(t[0]=(...e)=>r.collapseMenusOfChildren&&r.collapseMenusOfChildren(...e))},[(0,s.Wm)(o,{onRefreshEvent:r.reloadChildren,projectname:"Reaperville",ref:"nftTop"},null,8,["onRefreshEvent"]),(0,s.Wm)(l,{onRefreshEvent:r.reloadChildren,nftCA:i.contracts["nft"],projectname:"Reaperville",pictureLink:"https://raw.githubusercontent.com/Surviville/Reaperville/master/png-low-res/",ref:"nft"},null,8,["onRefreshEvent","nftCA"])])}n(6699);const sn={key:0,class:"text-center"},rn=(0,s._)("h5",null,"Please log into Metamask first, then refresh this website...",-1),on=[rn],ln={key:1,class:"col-xxl-10 col-xl-10 col-lg-10 col-md-10 col-sm-12 mx-auto"},dn={class:"card"},cn={class:"card-body"},un=(0,s._)("span",null,"Before you can upgrade your NFTs, you need to approve the SVC token once.",-1),pn=(0,s.Uk)("   "),hn=(0,s._)("br",null,null,-1),mn={key:2,class:"card"},yn={class:"col-xxl-12 col-xl-12 col-lg-12 col-md-12 col-sm-12"},wn={class:"card-body"},gn={class:"animate-characters"},fn=(0,s._)("br",null,null,-1),kn=(0,s.Uk)(" Filter "),bn=(0,s._)("i",{class:"ri-arrow-down-s-line"},null,-1),vn=[kn,bn],Tn=(0,s.Uk)(" Filter "),_n=(0,s._)("i",{class:"ri-arrow-up-s-line"},null,-1),xn=[Tn,_n],Cn=(0,s.Uk)("   "),Mn=(0,s.Uk)("   "),Pn=(0,s.Uk)("   "),Sn=["disabled"],Nn=(0,s.Uk)("   "),An=["disabled"],En=(0,s.Uk)("   "),In=["disabled"],Un={key:2},Fn={key:3},Bn=(0,s._)("hr",{class:"my-0"},null,-1),Rn=(0,s._)("hr",{class:"my-0"},null,-1),Dn=(0,s._)("br",null,null,-1),Ln={key:0,class:"text-center"},zn={key:1,class:"row"},Hn={class:"card items"},On=["onClick"],Vn={class:"row"},Wn={class:"items-img position-relative"},Yn=["src"],qn=(0,s.Uk)(" Current:   "),jn={title:"current level"},$n=(0,s.Uk)("   "),Xn={title:"current staking power"},Gn={key:1},Zn={class:"row"},Kn=["min","max","onUpdate:modelValue","onChange"],Qn=(0,s.Uk)(" After upgrade: 🏆 "),Jn=["onChange","min","max","onUpdate:modelValue"],ea={title:"power after upgrade"},ta={class:"d-flex justify-content-center mt-3"},na=["onClick","disabled"],aa=["onClick","disabled"],sa=(0,s.Uk)("   "),ia=["onClick","disabled"],ra=(0,s.Uk)("s"),oa={key:3,class:"popup"},la=(0,s._)("h5",{class:"text-monospace animate-popup"},"Loading NFTs...",-1),da={key:4,class:"popup"},ca={key:0,class:"text-monospace animate-popup"},ua=(0,s._)("br",null,null,-1),pa={key:1,class:"text-monospace animate-popup"};function ha(e,t,n,r,o,l){return(0,s.wg)(),(0,s.iD)(s.HY,null,[null===o.stakersAddress?((0,s.wg)(),(0,s.iD)("div",sn,on)):(0,s.kq)("",!0),null!==o.stakersAddress&&o.stakersAllowance4LevelingE18<=0?((0,s.wg)(),(0,s.iD)("div",ln,[(0,s._)("div",dn,[(0,s._)("div",cn,[un,pn,(0,s._)("button",{class:"btn btn-std",type:"button",id:"approveRewardToken",onClick:t[0]||(t[0]=(...e)=>l.approveRewardToken&&l.approveRewardToken(...e))}," approve SVC ")])])])):(0,s.kq)("",!0),hn,null!==o.stakersAddress?((0,s.wg)(),(0,s.iD)("div",mn,[(0,s._)("div",yn,[(0,s._)("div",wn,[(0,s._)("h4",gn,(0,i.zw)(o.selectedNfts.length)+" of "+(0,i.zw)(o.stakersNfts.length)+" NFTs selected ",1),fn,!1===o.expandFilter?((0,s.wg)(),(0,s.iD)("button",{key:0,class:"btn btn-std",type:"button",onClick:t[1]||(t[1]=(0,a.iM)((e=>o.expandFilter=!0),["stop"]))},vn)):((0,s.wg)(),(0,s.iD)("button",{key:1,class:"btn btn-outline-std",type:"button",onClick:t[2]||(t[2]=(...e)=>l.collapseMenus&&l.collapseMenus(...e))},xn)),Cn,(0,s._)("button",{onClick:t[3]||(t[3]=(...e)=>l.selectVisible&&l.selectVisible(...e)),class:"btn btn-success",style:{"font-size":"14px"}}," Select all "),Mn,(0,s._)("button",{onClick:t[4]||(t[4]=(...e)=>l.clearSelection&&l.clearSelection(...e)),class:"btn btn-danger",style:{"font-size":"14px"}}," Clear selection "),Pn,(0,s._)("button",{onClick:t[5]||(t[5]=e=>l.upgradeSelectedNfts()),class:"btn btn-success",disabled:o.selectedNfts.length<=0||o.stakersAllowance4LevelingE18<=0||o.stakersBalanceE18<=0||o.stakingPaused,style:{"font-size":"14px"}}," Upgrade "+(0,i.zw)(Math.min(o.selectedNfts.length,o.maxNftsPerTx))+" for "+(0,i.zw)(o.cost2BulkUpgradeE18)+" SVC ",9,Sn),Nn,(0,s._)("button",{onClick:t[6]||(t[6]=(...e)=>l.stakeSelected&&l.stakeSelected(...e)),class:"btn btn-success",disabled:o.selectedNfts.length<=0||o.stakingPaused,style:{"font-size":"14px"}}," Stake "+(0,i.zw)(Math.min(o.selectedNfts.length,o.maxNftsPerTx)),9,An),En,(0,s._)("button",{onClick:t[7]||(t[7]=(...e)=>l.unstakeSelected&&l.unstakeSelected(...e)),class:"btn btn-danger",disabled:o.selectedNfts.length<=0||o.stakingPaused,style:{"font-size":"14px"}}," Unstake "+(0,i.zw)(Math.min(o.selectedNfts.length,o.maxNftsPerTx)),9,In),o.selectedNfts.length>o.maxLevel?((0,s.wg)(),(0,s.iD)("p",Un," Note: "+(0,i.zw)(o.maxLevel)+" NFTs max staking and unstaking in 1 transaction ",1)):(0,s.kq)("",!0),o.expandFilter?((0,s.wg)(),(0,s.iD)("ul",Fn,[Bn,(0,s._)("a",{class:(0,i.C_)(["dropdown-item",null===o.filter?"current":""]),href:"#",onClick:t[8]||(t[8]=e=>l.filterNfts("all"))},"All ("+(0,i.zw)(o.stakersNfts.length)+")",3),(0,s._)("a",{class:(0,i.C_)(["dropdown-item","staked"===o.filter?"current":""]),href:"#",onClick:t[9]||(t[9]=e=>l.filterNfts("staked"))},"Staked ("+(0,i.zw)(o.stakedCount)+")",3),(0,s._)("a",{class:(0,i.C_)(["dropdown-item","unstaked"===o.filter?"current":""]),href:"#",onClick:t[10]||(t[10]=e=>l.filterNfts("unstaked"))},"Unstaked ("+(0,i.zw)(o.unstakedCount)+")",3),Rn])):(0,s.kq)("",!0)])]),Dn,!1===o.loadingNfts&&o.filteredNfts.length<=0?((0,s.wg)(),(0,s.iD)("h1",Ln,"No NFTs to display")):((0,s.wg)(),(0,s.iD)("div",zn,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.filteredNfts,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"col-xxl-2 col-xl-3 col-lg-4 col-md-4 col-sm-6",key:e},[(0,s._)("div",Hn,[(0,s._)("div",{class:(0,i.C_)(o.selectedNfts.includes(e)?"card-selected card-body":"card-body"),onClick:t=>l.selectNft(e)},[(0,s._)("div",Vn,[(0,s._)("label",null,[(0,s._)("h5",null,"#"+(0,i.zw)(e),1)])]),(0,s._)("div",Wn,[(0,s._)("img",{src:n.pictureLink+e+".png",class:"img-fluid rounded mb-3",alt:""},null,8,Yn)]),(0,s._)("h6",{onClick:t[11]||(t[11]=(0,a.iM)((()=>{}),["stop"]))},[qn,(0,s._)("span",jn," 🏆"+(0,i.zw)(o.nftInfo[e].level),1),$n,(0,s._)("span",Xn," 🔥"+(0,i.zw)(o.powerForLevel[o.nftInfo[e].level]),1)]),o.nftInfo[e].level>=o.maxLevel?((0,s.wg)(),(0,s.iD)("h6",{key:0,onClick:t[12]||(t[12]=(0,a.iM)((()=>{}),["stop"]))}," Max. level reached! ")):((0,s.wg)(),(0,s.iD)("div",Gn,[(0,s._)("div",Zn,[(0,s.wy)((0,s._)("input",{type:"range",title:"Choose desired level after upgrade",class:"form-control-range",min:o.nftInfo[e].level+1,max:o.maxLevel,id:"levelsToUpgradeSlider","onUpdate:modelValue":t=>o.nftInfo[e].nftLevelAfterUpgrade=t,onChange:t=>l.updateLevelsToUpgrade(e),onClick:t[13]||(t[13]=(0,a.iM)((()=>{}),["stop"]))},null,40,Kn),[[a.nr,o.nftInfo[e].nftLevelAfterUpgrade]])]),(0,s._)("h6",{class:"text-muted mx-auto",onClick:t[14]||(t[14]=(0,a.iM)((()=>{}),["stop"]))},[Qn,o.nftInfo[e].nftLevelAfterUpgrade<=o.maxLevel?(0,s.wy)(((0,s.wg)(),(0,s.iD)("input",{key:0,type:"number",title:"level after upgrade",onChange:t=>l.updateLevelsToUpgrade(e),min:o.nftInfo[e].level+1,max:o.maxLevel,style:{width:"3em"},"onUpdate:modelValue":t=>o.nftInfo[e].nftLevelAfterUpgrade=t},null,40,Jn)),[[a.nr,o.nftInfo[e].nftLevelAfterUpgrade]]):(0,s.kq)("",!0),(0,s._)("span",ea," 🔥"+(0,i.zw)(o.powerForLevel[o.nftInfo[e].nftLevelAfterUpgrade]),1)])])),(0,s._)("div",ta,[o.nftInfo[e].staked?((0,s.wg)(),(0,s.iD)("button",{key:0,onClick:(0,a.iM)((t=>l.unstake(e)),["stop"]),class:"btn btn-danger",disabled:o.stakingPaused,style:{"font-size":"14px"}}," Unstake ",8,na)):((0,s.wg)(),(0,s.iD)("button",{key:1,onClick:(0,a.iM)((t=>l.stake(e)),["stop"]),class:"btn btn-std",disabled:o.stakingPaused,style:{"font-size":"14px"}}," Stake ",8,aa)),sa,o.stakersAllowance4LevelingE18<=0?((0,s.wg)(),(0,s.iD)("button",{key:2,class:"btn btn-std",type:"button",id:"approveRewardToken",onClick:t[15]||(t[15]=(0,a.iM)(((...e)=>l.approveRewardToken&&l.approveRewardToken(...e)),["stop"])),style:{"font-size":"14px"}}," approve SVC ")):((0,s.wg)(),(0,s.iD)("button",{key:3,onClick:(0,a.iM)((t=>l.upgradeSpecificNft(e,o.nftInfo[e].levelsToUpgrade)),["stop"]),class:"btn btn-std",disabled:o.stakersBalanceE18<=0||o.nftInfo[e].level>=o.maxLevel||o.stakingPaused,style:{"font-size":"14px"}},[(0,s.Uk)(" Upgrade "+(0,i.zw)(o.nftInfo[e].levelsToUpgrade)+" level",1),1!=o.nftInfo[e].levelsToUpgrade?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[ra],64)):(0,s.kq)("",!0),(0,s.Uk)(" for "+(0,i.zw)(o.nftInfo[e].levelsToUpgrade*o.costPerLvlE18)+" SVC ",1)],8,ia))])],10,On)])])))),128))]))])):(0,s.kq)("",!0),!0===o.loadingNfts&&null!==o.stakersAddress?((0,s.wg)(),(0,s.iD)("div",oa,[(0,s._)("div",{class:"popupX",onClick:t[16]||(t[16]=e=>o.loadingNfts=!1)},"x"),la])):(0,s.kq)("",!0),o.txInProgress||""!=o.feedbackMessage?((0,s.wg)(),(0,s.iD)("div",da,[(0,s._)("div",{class:"popupX",onClick:t[17]||(t[17]=e=>{o.feedbackMessage="",o.txInProgress=!1})}," x "),""!=o.feedbackMessage?((0,s.wg)(),(0,s.iD)("h4",ca,(0,i.zw)(o.feedbackMessage),1)):(0,s.kq)("",!0),ua,o.txInProgress?((0,s.wg)(),(0,s.iD)("h5",pa," Waiting for current transaction to finish... ")):(0,s.kq)("",!0)])):(0,s.kq)("",!0)],64)}var ma=n(9700);function ya(e,t){let n=e.indexOf(t);return n>-1?e.splice(n,1):console.log("Unstaking an NFT that has not been staked before!"),e}var wa={name:"App",props:["nftCA","projectname","pictureLink"],emits:["refreshEvent"],data(){return{expandFilter:!1,rpc:null,maxLevel:100,costPerLvlE18:100,cost2BulkUpgradeE18:0,powerForLevel:[1e3,1050,1104,1162,1224,1291,1363,1440,1523,1613,1710,1815,1928,2051,2184,2329,2486,2657,2844,3048,3271,3515,3782,4075,4397,4730,5074,5428,5792,6165,6546,6934,7329,7730,8136,8546,8959,9375,9793,10212,10632,11051,11469,11886,12301,12713,13122,13527,13928,14324,14715,15101,15481,15855,16223,16584,16939,17287,17628,17962,18288,18607,18918,19222,19519,19808,20090,20364,20631,20891,21143,21391,21634,21873,22107,22336,22561,22781,22997,23210,23421,23630,23836,24040,24242,24441,24638,24833,25025,25215,25402,25587,25770,25950,26128,26304,26477,26648,26817,26983,27147],maxNftsPerTx:50,showLevelingExplanation:!1,stakersAddress:null,currentCollection:null,stakersBalanceE18:0,stakersAllowance4LevelingE18:0,contracts:{},provider:null,signer:null,loadingNfts:!0,stakersNfts:[],filteredNfts:[],filter:"all",selectedNfts:[],nftInfo:{},stakedCount:0,unstakedCount:0,nftLevel:{},feedbackMessage:"",txInProgress:!1,lastTimeout:0,stakingPaused:!0}},methods:{collapseMenus:function(){this.expandFilter=!1},setFeedback:function(e,t){let n=this;n.feedbackMessage=e,n.lastTimeout>0&&clearTimeout(n.lastTimeout),t>0&&(n.lastTimeout=setTimeout((function(){n.feedbackMessage=""}),t))},selectNft:function(e){let t=this;t.selectedNfts.indexOf(e)<0?t.selectedNfts.push(e):ya(t.selectedNfts,e),t.updateCostForBulkUpgrade()},updateLevelsToUpgrade:function(e){let t=this;t.nftInfo[e].nftLevelAfterUpgrade=Math.round(t.nftInfo[e].nftLevelAfterUpgrade),t.selectedNfts.indexOf(e)<0&&t.selectedNfts.push(e),t.nftInfo[e].nftLevelAfterUpgrade>t.maxLevel?t.nftInfo[e].nftLevelAfterUpgrade=t.maxLevel:t.nftInfo[e].nftLevelAfterUpgrade<t.nftInfo[e].level+1&&(t.nftInfo[e].nftLevelAfterUpgrade=t.nftInfo[e].level+1),t.nftInfo[e].levelsToUpgrade=t.nftInfo[e].nftLevelAfterUpgrade-t.nftInfo[e].level,t.updateCostForBulkUpgrade()},getInitialLevel:function(e){return e<10?10:2500==e?0:9-Math.floor(e/250)},getPower:function(e){return this.powerForLevel[this.nftInfo[e].level]},approveRewardToken:async function(){let e=this;e.setFeedback("Approving SVC token",0),e.txInProgress=!0;try{let t=await e.contracts["svc"].approve(window.ca["reaper"],ma.Bz,{gasLimit:65e3});await t.wait(),e.contracts["svc"].allowance(e.stakersAddress,window.ca["reaper"]).then((t=>{e.stakersAllowance4LevelingE18=t/10**18})),e.feedbackMessage="",e.txInProgress=!1}catch{e.txInProgress=!1,this.setFeedback("The transaction failed :(",2e3)}},stake:async function(e){this.txInProgress=!0,this.setFeedback("Staking NFT",0);try{let t=await this.contracts["staking"].stake([e],{gasLimit:28e4});await t.wait(),this.txInProgress=!1,this.feedbackMessage="",this.$emit("refreshEvent"),this.load()}catch{this.txInProgress=!1,this.setFeedback("The transaction failed :(",2e3)}},unstake:async function(e){this.txInProgress=!0,this.setFeedback("Unstaking NFT",0);try{let t=await this.contracts["staking"].unstake([e],{gasLimit:29e4});await t.wait(),this.txInProgress=!1,this.feedbackMessage="",this.$emit("refreshEvent"),this.load()}catch{this.txInProgress=!1,this.setFeedback("The transaction failed :(",2e3)}},selectVisible:function(){this.feedbackMessage="",this.selectedNfts=[];for(let e of this.filteredNfts)this.selectedNfts.indexOf(e)<0&&this.selectedNfts.push(e);this.updateCostForBulkUpgrade()},clearSelection:function(){this.feedbackMessage="",this.selectedNfts=[],this.updateCostForBulkUpgrade()},stakeSelected:async function(){this.txInProgress=!0,this.setFeedback("Staking NFTs",0);let e=[];for(let t of this.selectedNfts)!1===this.nftInfo[t].staked&&e.length<this.maxNftsPerTx&&e.push(t);if(this.selectedNfts=e.slice(),0===e.length)return this.setFeedback("No selected NFT matches all criteria.",2e3),this.txInProgress=!1,!1;this.setFeedback("Staking selected NFTs.",0);try{let t=await this.contracts["staking"].stake(e,{gasLimit:Math.min(1e5+18e4*e.length,9999999)});await t.wait(),this.txInProgress=!1,this.feedbackMessage="",this.$emit("refreshEvent"),this.load()}catch{this.txInProgress=!1,this.setFeedback("The transaction failed :(",2e3)}},unstakeSelected:async function(){this.txInProgress=!0,this.setFeedback("Unstaking NFTs",0);let e=[];for(let t of this.selectedNfts)!0===this.nftInfo[t].staked&&e.length<this.maxNftsPerTx&&e.push(t);if(this.selectedNfts=e.slice(),0===e.length)return this.setFeedback("No selected NFT matches all criteria.",2e3),!1;this.setFeedback("Unstaking selected NFTs.",0);try{let t=await this.contracts["staking"].unstake(e,{gasLimit:Math.min(125e3+2e5*e.length,9999999)});await t.wait(),this.txInProgress=!1,this.feedbackMessage="",this.$emit("refreshEvent"),this.load()}catch{this.txInProgress=!1,this.setFeedback("The transaction failed :(",2e3)}},updateCostForBulkUpgrade:function(){let e=0,t=0;for(let n=0;n<this.selectedNfts.length;n++){let a=this.selectedNfts[n],s=this.nftInfo[a].levelsToUpgrade*this.costPerLvlE18;e<this.maxNftsPerTx&&(t+=s,e++)}this.cost2BulkUpgradeE18=t},upgradeSpecificNft:async function(e,t){let n=this;if(this.feedbackMessage="",0===t)return this.setFeedback("Can't upgrade 0 levels",2e3),!1;let a=t*n.costPerLvlE18;if(a>n.stakersAllowance4LevelingE18)return n.setFeedback("Please increase your SVC token allowance first",2e3),!1;if(a>n.stakersBalanceE18)return n.setFeedback("SVC balance is too low",2e3),!1;let s=n.nftInfo[e].level;if(s>=n.maxLevel)return n.setFeedback("Cannot upgrade "+e+", because it's already at max. level",2e3),!1;let i=await n.contracts["nft"].ownerOf(e);if(i!==n.stakersAddress&&i!==window.ca["reaper"])return n.setFeedback("Cannot upgrade "+e+", because it's not in your wallet",2e3),!1;n.setFeedback("Upgrading 1 NFT by "+t+" levels with "+a+" SVC",0),console.log(n.feedbackMessage),console.log("Power old= "+n.getPower(e)),console.log("Level old= "+s),console.log("Balance old= "+n.stakersBalanceE18);let r=n.stakersBalanceE18-a;console.log("Balance new= "+r),n.txInProgress=!0;try{let a=await n.contracts["staking"].upgradeLevel([e],[t],{gasLimit:24e4});await a.wait(),await n.contracts["staking"].getLevelView(e).then((t=>{n.nftInfo[e]={level:t,nftLevelAfterUpgrade:t+1,levelsToUpgrade:1}})),n.sortNfts(),n.txInProgress=!1,n.feedbackMessage="",n.$emit("refreshEvent")}catch{this.txInProgress=!1,this.setFeedback("The transaction failed :(",2e3)}},upgradeSelectedNfts:async function(){this.feedbackMessage="";let e=this;if(e.cost2BulkUpgradeE18>e.stakersAllowance4LevelingE18)return this.setFeedback("Please increase your SVC token allowance first",2e3),!1;if(e.cost2BulkUpgradeE18>e.stakersBalanceE18)return this.setFeedback("SVC token balance is too low",2e3),!1;if(e.selectedNfts.length<1)return this.setFeedback("No NFTs selected",2e3),!1;if(1==e.selectedNfts.length){let t=e.selectedNfts[0],n=e.nftInfo[t].level;if(n>=e.maxLevel)return e.setFeedback("Cannot upgrade "+t+", because it's already at max. level",2e3),console.log(e.feedbackMessage),!1;let a=await this.contracts["nft"].ownerOf(t);if(a!==e.stakersAddress&&a!==window.ca["reaper"])return e.setFeedback("You don't own "+t,2e3),!1;e.setFeedback("Upgrading 1 NFT by "+e.nftInfo[t].levelsToUpgrade+" levels",0),console.log(e.feedbackMessage),console.log("Level old= "+n),console.log("Balance old= "+e.stakersBalanceE18);let s=e.stakersBalanceE18-e.cost2BulkUpgradeE18;console.log("Balance new= "+s),this.txInProgress=!0;try{let n=await e.contracts["staking"].upgradeLevel([t],[e.nftInfo[t].levelsToUpgrade],{gasLimit:24e4});await n.wait(),await e.contracts["staking"].getLevelView(t).then((n=>{e.nftInfo[t]={level:n,nftLevelAfterUpgrade:n+1,levelsToUpgrade:1}})),e.sortNfts(),e.$emit("refreshEvent")}catch{this.txInProgress=!1,this.setFeedback("The transaction failed :(",2e3)}}else if(e.selectedNfts.length>1){let t=[],n=[];e.setFeedback("Double checking selected NFTs",2e3);for(let s=0;s<e.selectedNfts.length&&t.length<e.maxNftsPerTx;s++){let a=e.selectedNfts[s];0!==e.nftInfo[a].levelsToUpgrade?e.nftInfo[a].level>=e.maxLevel?e.feedbackMessage+=" — Skipping "+a+" (already at max level)":(t.push(e.selectedNfts[s]),n.push(e.nftInfo[a].levelsToUpgrade),console.log("Adding "+a),console.log(t)):e.feedbackMessage+=" — Skipping "+a+" (0 SVC upgrade)"}e.feedbackMessage+=" — "+t.length+" NFTs passed all checks",console.log(t),console.log(n),console.log("Bulk Upgrade Cost= "+e.cost2BulkUpgradeE18),console.log("Balance old="+e.stakersBalanceE18);let a=e.stakersBalanceE18-e.cost2BulkUpgradeE18;if(console.log("Balance after bulk upgrade: ",a),t.length<=0)return!1;e.feedbackMessage+=" — Upgrading NFTs ["+t+"] by ["+n+"] levels",this.txInProgress=!0;try{let e=await this.contracts["staking"].upgradeLevel(t,n,{gasLimit:Math.min(7e4+16e4*t.length,9999999)});await e.wait(),this.$emit("refreshEvent"),this.load()}catch{this.txInProgress=!1,this.setFeedback("The transaction failed :(",2e3)}}},filterNfts:function(e){let t=this;switch(t.collapseMenus(),t.filter=e,e){case"all":t.filteredNfts=t.stakersNfts;break;case"staked":t.filteredNfts=t.stakersNfts.filter((e=>!0===t.nftInfo[e].staked));break;case"unstaked":t.filteredNfts=t.stakersNfts.filter((e=>!1===t.nftInfo[e].staked));break;default:t.setFeedback("Filter not implemented",2e3)}},getWalletOfOwner:async function(e){let t=this;const n=500;return new Promise(((a,s)=>{let i=0,r=0;console.log("slice=",e),t.contracts["nft"].walletOfOwnerWithLevels(t.stakersAddress,n,e).then((e=>{console.log("tokensLevels=",e),i=e.length,2*Math.floor(e.length/2)+1!==e.length&&console.log("Critical error! tokenLevelsLength should always be an odd number! tokenLevelsLength=",i),r=e[e.length-1];for(let n=0;n<e.length-1;n+=2){let a=Number(e[n]),s=Number(e[n+1]),i=!1;s>t.maxLevel?(s-=1e3,i=!1,t.unstakedCount++):(i=!0,t.stakedCount++),0===s&&(s=t.getInitialLevel(a)),t.stakersNfts.push(a),t.nftInfo[a]={staked:i,level:s,nftLevelAfterUpgrade:s+1,levelsToUpgrade:1}}})).then((()=>{(e+1)*n<r?(console.log("tokenLevelsLength",i),t.getWalletOfOwner(e+1).then((()=>{a()}))):a()})).catch((()=>{s()}))}))},sortNfts:function(){let e=this;e.stakersNfts.sort((function(t,n){return e.nftInfo[n].staked-e.nftInfo[t].staked||e.nftInfo[n].level-e.nftInfo[t].level||t-n}))},reload:function(){this.contracts["svc"].balanceOf(this.stakersAddress).then((e=>{this.stakersBalanceE18=e/10**18})),this.contracts["svc"].allowance(this.stakersAddress,window.ca["reaper"]).then((e=>{this.stakersAllowance4LevelingE18=e/10**18}))},load:async function(){let e=this;e.loadingNfts=!0,this.txInProgress=!1,this.feedbackMessage="",e.selectedNfts=[],e.filteredNfts=[],e.stakersNfts=[],e.stakedCount=0,e.unstakedCount=0,e.stakersAddress=await e.signer.getAddress(),e.contracts["staking"].isMintPausedStakingPaused().then((t=>{console.log(t),e.stakingPaused=t[1]})),e.contracts["svc"].balanceOf(e.stakersAddress).then((t=>{e.stakersBalanceE18=t/10**18})),e.contracts["svc"].allowance(e.stakersAddress,window.ca["reaper"]).then((t=>{e.stakersAllowance4LevelingE18=t/10**18})),e.getWalletOfOwner(0).then((()=>{e.sortNfts(),console.log("calling filter"),e.filterNfts(e.filter),e.loadingNfts=!1}))}},mounted:function(){this.rpc=window.ethereum,this.provider=new E.Q(this.rpc,"any"),this.provider.send("eth_requestAccounts",[]).then((()=>{this.signer=this.provider.getSigner(),this.contracts["nft"]=new Ge.CH(this.nftCA.toString(),Qe.Mt,this.signer),this.contracts["staking"]=new Ge.CH(window.ca["reaper"],Qe.Mt,this.signer),this.contracts["svc"]=new Ge.CH(window.ca["svc"],Ke.Mt,this.signer)})).then((()=>{this.load()}))}};const ga=(0,U.Z)(wa,[["render",ha]]);var fa=ga;const ka={class:"row"},ba={class:"col-xxl-6 mx-auto"},va={class:"card"},Ta={class:"card-body"},_a={class:"col-12 align-items-left"},xa={class:"animate-characters"},Ca=(0,s.Uk)("   "),Ma={href:"#"},Pa=(0,s._)("br",null,null,-1),Sa=(0,s._)("h4",{class:"animate-characters"},"Staking and Leveling",-1),Na=(0,s._)("br",null,null,-1),Aa=(0,s._)("br",null,null,-1),Ea=(0,s._)("h5",null,"(Harvest and unstake reset the timer.)",-1),Ia=(0,s._)("br",null,null,-1),Ua=(0,s._)("br",null,null,-1),Fa={key:1},Ba=(0,s._)("br",null,null,-1),Ra=(0,s._)("br",null,null,-1),Da={key:1,class:"settings-menu"},La=(0,s._)("i",{class:"ri-arrow-down-s-line"},null,-1),za=(0,s._)("i",{class:"ri-arrow-up-s-line"},null,-1),Ha={key:2},Oa=(0,s._)("br",null,null,-1),Va={class:"settings-menu"},Wa=["disabled"],Ya=(0,s.Uk)("   "),qa=(0,s._)("a",{target:"_blank",href:"https://app.mistswap.fi/swap?inputCurrency=BCH&outputCurrency=0xE7B1076d0853a7aAa6FbB477886726ed03C6Fffd",class:"btn btn-std"}," Trade SVC at MistSwap ",-1),ja={key:1,class:"popup"},$a={key:0,class:"text-monospace animate-popup"},Xa=(0,s._)("br",null,null,-1),Ga={key:1,class:"text-monospace animate-popup"};function Za(e,t,n,r,o,l){return(0,s.wg)(),(0,s.iD)(s.HY,null,[null!==o.stakersAddress?((0,s.wg)(),(0,s.iD)("div",{key:0,onClick:t[10]||(t[10]=e=>o.expandEarnings=!1),class:"container text-start"},[(0,s._)("div",ka,[(0,s._)("div",ba,[(0,s._)("div",va,[(0,s._)("div",Ta,[(0,s._)("div",_a,[(0,s._)("h2",null,[(0,s._)("span",xa,(0,i.zw)(n.projectname)+" NFTs",1),Ca,(0,s._)("a",Ma,[(0,s._)("i",{title:"Reload numbers",onClick:t[0]||(t[0]=t=>e.$emit("refreshEvent")),class:"ri-refresh-fill"})])]),Pa,Sa,(0,s._)("h5",null,"Balance: "+(0,i.zw)(o.stakersRewardTokenBalance)+" SVC",1),Na,(0,s._)("h5",{onRefreshEvent:t[1]||(t[1]=(...e)=>l.reload&&l.reload(...e))}," Staking power: "+(0,i.zw)(o.stakersPower)+"🔥 ",33),Aa,o.stakersPower>0?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[(0,s._)("h5",null,"Staked for "+(0,i.zw)(l.formatSeconds(o.stakerStakedForSeconds))+".",1),Ea,Ia,(0,s._)("h5",null,[(0,s._)("strong",null,"Current payout level: "+(0,i.zw)(o.stakersPayoutPct)+"%",1)]),Ua,o.stakerNextPayoutPctInSeconds>0?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[(0,s._)("h5",null,"Next payout level: "+(0,i.zw)(o.stakersNextPayoutPct)+"%",1),(0,s._)("h5",null," (reached in "+(0,i.zw)(l.formatSeconds(o.stakerNextPayoutPctInSeconds))+") ",1)],64)):((0,s.wg)(),(0,s.iD)("h5",Fa," Congratulations! You reached the highest payout level. "))],64)):(0,s.kq)("",!0),Ba,(0,s._)("h6",null,"Total staked power: "+(0,i.zw)(o.totalStakedPower)+"🔥",1),(0,s._)("h6",null," Total SVC Emission: ~"+(0,i.zw)(Math.round(o.svcEmissionPerHour*o.earningsTime*100)/100)+" SVC / "+(0,i.zw)(o.hoursInWords[o.earningsTime]),1),Ra,o.svcEmissionPerHour&&o.totalStakedPower&&o.stakersPower?((0,s.wg)(),(0,s.iD)("div",Da,[!1===o.expandEarnings?((0,s.wg)(),(0,s.iD)("button",{key:0,class:"btn btn-std",onClick:t[2]||(t[2]=(0,a.iM)((e=>o.expandEarnings=!o.expandEarnings),["stop"]))},[(0,s.Uk)(" Earning ~"+(0,i.zw)(Math.round(o.stakerEarningRateX1k*o.earningsTime)/1e3)+" SVC / "+(0,i.zw)(o.hoursInWords[o.earningsTime])+" (@100%) ",1),La])):((0,s.wg)(),(0,s.iD)("button",{key:1,class:"btn btn-outline-std",onClick:t[3]||(t[3]=e=>o.expandEarnings=!o.expandEarnings)},[(0,s.Uk)(" Earning ~"+(0,i.zw)(Math.round(o.stakerEarningRateX1k*o.earningsTime)/1e3)+" SVC / "+(0,i.zw)(o.hoursInWords[o.earningsTime])+" (@100%) ",1),za])),o.expandEarnings?((0,s.wg)(),(0,s.iD)("ul",Ha,[(0,s._)("span",{class:(0,i.C_)(["dropdown-item",1===o.earningsTime?"current":""]),onClick:t[4]||(t[4]=e=>{o.earningsTime=1,o.expandEarnings=!1})}," Earning ~"+(0,i.zw)(Math.round(1*o.stakerEarningRateX1k)/1e3)+" SVC / hour (@100%) ",3),(0,s._)("span",{class:(0,i.C_)(["dropdown-item",24===o.earningsTime?"current":""]),onClick:t[5]||(t[5]=e=>{o.earningsTime=24,o.expandEarnings=!1})}," Earning ~"+(0,i.zw)(Math.round(24*o.stakerEarningRateX1k)/1e3)+" SVC / day (@100%) ",3),(0,s._)("span",{class:(0,i.C_)(["dropdown-item",168===o.earningsTime?"current":""]),onClick:t[6]||(t[6]=e=>{o.earningsTime=168,o.expandEarnings=!1})}," Earning ~"+(0,i.zw)(Math.round(168*o.stakerEarningRateX1k)/1e3)+" SVC / week (@100%) ",3),(0,s._)("span",{class:(0,i.C_)(["dropdown-item",720===o.earningsTime?"current":""]),onClick:t[7]||(t[7]=e=>{o.earningsTime=720,o.expandEarnings=!1})}," Earning ~"+(0,i.zw)(Math.round(720*o.stakerEarningRateX1k)/1e3)+" SVC / month (@100%) ",3),(0,s._)("span",{class:(0,i.C_)(["dropdown-item",8760===o.earningsTime?"current":""]),onClick:t[8]||(t[8]=e=>{o.earningsTime=8760,o.expandEarnings=!1})}," Earning ~"+(0,i.zw)(Math.round(8760*o.stakerEarningRateX1k)/1e3)+" SVC / year (@100%) ",3)])):(0,s.kq)("",!0)])):(0,s.kq)("",!0),Oa,(0,s._)("div",Va,[(0,s._)("button",{class:"btn btn-std",onClick:t[9]||(t[9]=(...e)=>l.harvest&&l.harvest(...e)),disabled:o.stakingPaused||0==o.rewardTokenToHarvest}," Harvest "+(0,i.zw)(Math.round(o.stakersPayoutPct*o.rewardTokenToHarvest*10)/1e3)+" SVC ",9,Wa),Ya,qa])])])])])])])):(0,s.kq)("",!0),o.txInProgress||""!=o.feedbackMessage?((0,s.wg)(),(0,s.iD)("div",ja,[(0,s._)("div",{class:"popupX",onClick:t[11]||(t[11]=e=>{o.feedbackMessage="",o.txInProgress=!1})}," x "),""!=o.feedbackMessage?((0,s.wg)(),(0,s.iD)("h4",$a,(0,i.zw)(o.feedbackMessage),1)):(0,s.kq)("",!0),Xa,o.txInProgress?((0,s.wg)(),(0,s.iD)("h5",Ga," Waiting for current transaction to finish... ")):(0,s.kq)("",!0)])):(0,s.kq)("",!0)],64)}var Ka={name:"App",props:["projectname"],emits:["refreshEvent"],data(){return{expandEarnings:!1,contracts:{},provider:null,signer:null,svcEmissionPerHour:null,stakersAddress:null,stakerStakedForSeconds:null,SECONDS_PER_DAY:86400,stakersPayoutPct:null,stakersNextPayoutPct:null,stakerNextPayoutPctInSeconds:null,stakersPower:null,totalStakedPower:null,baseStakingPower:null,stakerEarningRateX1k:null,earningsTime:168,hoursInWords:{1:"hour",24:"day",168:"week",720:"month",8760:"year"},rewardTokenToHarvest:0,stakingPaused:!0,stakersRewardTokenBalance:0,feedbackMessage:"",txInProgress:!1,lastTimeout:0}},methods:{collapseMenus:function(){this.expandEarnings=!1},setFeedback:function(e,t){let n=this;n.feedbackMessage=e,n.lastTimeout>0&&clearTimeout(n.lastTimeout),t>0&&(n.lastTimeout=setTimeout((function(){n.feedbackMessage=""}),t))},harvest:async function(){this.setFeedback("Harvesting your earnings",0),this.txInProgress=!0;try{let e=await this.contracts["staking"].harvest();await e.wait(),this.feedbackMessage=""}catch{this.setFeedback("The transaction failed :(",2e3)}this.txInProgress=!1,this.$emit("refreshEvent")},approve:async function(){this.setFeedback("Harvesting your earnings",2e3),this.txInProgress=!0;try{let e=await this.contracts["nft"].setApprovalForAll(window.ca["reaper"],!0);await e.wait(),this.feedbackMessage=""}catch{this.setFeedback("The transaction failed :(",2e3)}this.txInProgress=!1,window.location.reload()},formatSeconds:function(e){e=Number(e);var t=Math.floor(e/86400),n=Math.floor(e%86400/3600),a=Math.floor(e%3600/60),s=Math.floor(e%60),i=t>0?t+" d, ":"",r=n>0?n+" h, ":"",o=a>0?a+" min, ":"",l=s+" sec";return i+r+o+l},loadStakerInfo:function(){this.contracts["staking"].showStakerInfo(this.stakersAddress).then((e=>{let t=e[0];if(this.stakerStakedForSeconds=t,t>30*this.SECONDS_PER_DAY)this.stakersPayoutPct=115,this.stakersNextPayoutPct=115,this.stakerNextPayoutPctInSeconds=0;else if(t<19*this.SECONDS_PER_DAY){let e=Math.floor(t/this.SECONDS_PER_DAY);this.stakersPayoutPct=5*(e+1),this.stakersNextPayoutPct=this.stakersPayoutPct+5,this.stakerNextPayoutPctInSeconds=(e+1)*this.SECONDS_PER_DAY-t}else this.stakersPayoutPct=100,this.stakersNextPayoutPct=115,this.stakerNextPayoutPctInSeconds=30*this.SECONDS_PER_DAY-t;this.stakersPower=e[1],this.totalStakedPower=e[2],this.baseStakingPower=e[3],this.svcEmissionPerHour=String(Math.round(1e5*Ze.dF(e[4]))/1e5),this.stakerEarningRateX1k=this.svcEmissionPerHour*this.stakersPower/(this.totalStakedPower-this.baseStakingPower)*1e3})),this.rewardTokenToHarvest=0,this.contracts["staking"].showStakersEarningsUntilLastTimestamp(this.stakersAddress).then((e=>{this.rewardTokenToHarvest+=Math.round(1e5*Ze.dF(e))/1e5})),this.contracts["staking"].showStakersEarningsAfterLastTimestamp(this.stakersAddress).then((e=>{this.rewardTokenToHarvest+=Math.round(1e5*Ze.dF(e))/1e5})),this.contracts["staking"].isMintPausedStakingPaused().then((e=>{this.stakingPaused=e[1]}))},getRewardTokenBalance:function(){this.contracts["svc"].balanceOf(this.stakersAddress).then((e=>{this.stakersRewardTokenBalance=String(Math.round(1e5*Ze.dF(e))/1e5)}))},reload:function(){this.getRewardTokenBalance(),this.loadStakerInfo()},load:function(){this.signer.getAddress().then((e=>{this.stakersAddress=e,this.loadStakerInfo(),this.getRewardTokenBalance()}))}},mounted:function(){this.provider=new E.Q(window.ethereum,"any"),this.provider.send("eth_requestAccounts",[]).then((()=>{this.signer=this.provider.getSigner(),this.contracts["svc"]=new Ge.CH(window.ca["svc"],Ke.Mt,this.signer),this.contracts["staking"]=new Ge.CH(window.ca["reaper"],Qe.Mt,this.signer)})).then((()=>{this.load()}))}};const Qa=(0,U.Z)(Ka,[["render",Za]]);var Ja=Qa,es={name:"App",components:{Nft:fa,NftTop:Ja},data(){return{contracts:{}}},methods:{reloadChildren:function(){this.$refs.nftTop.reload(),this.$refs.nft.reload()},collapseMenusOfChildren:function(){this.$refs.nftTop.collapseMenus(),this.$refs.nft.collapseMenus()}},mounted:function(){this.contracts["nft"]=window.ca["reaper"]}};const ts=(0,U.Z)(es,[["render",an]]);var ns=ts;const as={class:"content-body"};function ss(e,t,n,a,i,r){const o=(0,s.up)("AllNfts");return(0,s.wg)(),(0,s.iD)("div",as,[(0,s.Wm)(o,{pictureLink:i.pictureLink,projectname:"Reaperville"},null,8,["pictureLink"])])}const is=(0,s.uE)('<div class="col-12"><div class="card"><div class="card-body"><div class="row"><div class="col-xxl-10 col-xl-10 col-lg-10 col-md-10 col-sm-12 mx-auto"><div class="card-body"><h2 class="animate-characters"> Explore the colorful Reaperville NFT collection on SmartBch! </h2><h4> Which one is your favorite? Let us know in the <a href="https://t.me/reaperville" target="_blank">official Reaperville Telegram group</a>. </h4></div></div></div></div></div></div>',1),rs={class:"col-12"},os={class:"card filter-tab"},ls={class:"card-body bs-0 p-0 bg-transparent"},ds={class:"row"},cs={class:"col-xxl-10 col-xl-10 col-lg-10 col-md-10 col-sm-12 mx-auto"},us={class:"card-body"},ps=(0,s._)("i",{class:"ri-arrow-down-s-line"},null,-1),hs=(0,s._)("i",{class:"ri-arrow-up-s-line"},null,-1),ms=(0,s.Uk)("   "),ys=(0,s._)("i",{class:"ri-arrow-down-s-line"},null,-1),ws=(0,s._)("i",{class:"ri-arrow-up-s-line"},null,-1),gs=(0,s.Uk)("   "),fs={key:6,class:"mt-3"},ks=(0,s._)("hr",{class:"my-0"},null,-1),bs=["onClick"],vs=(0,s._)("hr",{class:"my-0"},null,-1),Ts={key:7,class:"mt-3"},_s=(0,s._)("hr",{class:"my-0"},null,-1),xs=(0,s._)("hr",{class:"my-0"},null,-1),Cs=(0,s._)("br",null,null,-1),Ms={class:"row"},Ps={class:"card items"},Ss={class:"card-body"},Ns={class:"card-title"},As={class:"items-img position-relative"},Es=["src"];function Is(e,t,n,a,r,o){return(0,s.wg)(),(0,s.iD)(s.HY,null,[is,(0,s._)("div",rs,[(0,s._)("div",os,[(0,s._)("div",ls,[(0,s._)("div",ds,[(0,s._)("div",cs,[(0,s._)("div",us,[!1===r.expandRange?((0,s.wg)(),(0,s.iD)("button",{key:0,class:"btn btn-std",type:"button",onClick:t[0]||(t[0]=e=>r.expandRange=!r.expandRange)},[(0,s.Uk)(" Showing "+(0,i.zw)(r.startIdx)+" - "+(0,i.zw)(r.startIdx+r.maxNftsPerPage-1)+" ",1),ps])):((0,s.wg)(),(0,s.iD)("button",{key:1,class:"btn btn-outline-std",type:"button",onClick:t[1]||(t[1]=e=>r.expandRange=!r.expandRange)},[(0,s.Uk)(" Showing "+(0,i.zw)(r.startIdx)+" - "+(0,i.zw)(r.startIdx+r.maxNftsPerPage-1)+" ",1),hs])),ms,!1===r.expandMaxNftsPerPage?((0,s.wg)(),(0,s.iD)("button",{key:2,class:"btn btn-std",type:"button",onClick:t[2]||(t[2]=e=>r.expandMaxNftsPerPage=!r.expandMaxNftsPerPage)},[(0,s.Uk)(" Max. "+(0,i.zw)(r.maxNftsPerPage)+" NFTs ",1),ys])):((0,s.wg)(),(0,s.iD)("button",{key:3,class:"btn btn-outline-std",type:"button",onClick:t[3]||(t[3]=e=>r.expandMaxNftsPerPage=!r.expandMaxNftsPerPage)},[(0,s.Uk)(" Max. "+(0,i.zw)(r.maxNftsPerPage)+" NFTs ",1),ws])),gs,r.imgResolutionIdx>0?((0,s.wg)(),(0,s.iD)("button",{key:4,class:"btn btn-outline-std",type:"button",onClick:t[4]||(t[4]=e=>r.imgResolutionIdx=(r.imgResolutionIdx+1)%2)}," Resolution: Full ")):((0,s.wg)(),(0,s.iD)("button",{key:5,class:"btn btn-std",type:"button",onClick:t[5]||(t[5]=e=>r.imgResolutionIdx=(r.imgResolutionIdx+1)%2)}," Resolution: Low ")),r.expandRange?((0,s.wg)(),(0,s.iD)("ul",fs,[ks,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(Math.ceil(2500/r.maxNftsPerPage),(e=>((0,s.wg)(),(0,s.iD)("a",{key:e,class:(0,i.C_)(["dropdown-item",r.startIdx===(e-1)*r.maxNftsPerPage?"current":""]),href:"#",onClick:t=>o.load((e-1)*r.maxNftsPerPage+1,r.maxNftsPerPage)}," Show "+(0,i.zw)((e-1)*r.maxNftsPerPage+1)+" - "+(0,i.zw)(Math.min(e*r.maxNftsPerPage,2500)),11,bs)))),128)),vs])):(0,s.kq)("",!0),r.expandMaxNftsPerPage?((0,s.wg)(),(0,s.iD)("ul",Ts,[_s,(0,s._)("a",{class:(0,i.C_)(["dropdown-item",10===r.maxNftsPerPage?"current":""]),href:"#",onClick:t[6]||(t[6]=e=>o.load(r.startIdx,10))},"Max. 10",2),(0,s._)("a",{class:(0,i.C_)(["dropdown-item",25===r.maxNftsPerPage?"current":""]),href:"#",onClick:t[7]||(t[7]=e=>o.load(r.startIdx,25))},"Max. 25",2),(0,s._)("a",{class:(0,i.C_)(["dropdown-item",50===r.maxNftsPerPage?"current":""]),href:"#",onClick:t[8]||(t[8]=e=>o.load(r.startIdx,50))},"Max. 50",2),(0,s._)("a",{class:(0,i.C_)(["dropdown-item",75===r.maxNftsPerPage?"current":""]),href:"#",onClick:t[9]||(t[9]=e=>o.load(r.startIdx,75))},"Max. 75",2),(0,s._)("a",{class:(0,i.C_)(["dropdown-item",125===r.maxNftsPerPage?"current":""]),href:"#",onClick:t[10]||(t[10]=e=>o.load(r.startIdx,125))},"Max. 125",2),xs])):(0,s.kq)("",!0)])])]),Cs,(0,s._)("div",Ms,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.filteredNfts,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"col-xxl-3 col-xl-4 col-lg-4 col-md-6 col-sm-6",key:e},[(0,s._)("div",Ps,[(0,s._)("div",Ss,[(0,s._)("label",null,[(0,s._)("h4",Ns," #"+(0,i.zw)(e)+"   ",1)]),(0,s._)("div",As,[(0,s._)("img",{src:n.pictureLink[r.imgResolutionIdx]+e+".png",class:"img-fluid rounded mb-3"},null,8,Es)])])])])))),128))])])])])],64)}var Us={name:"App",props:["pictureLink","projectname"],emits:["updateStakingPowerEvent"],data(){return{expandRange:!1,expandMaxNftsPerPage:!1,maxLevel:100,powerForLevel:[1e3,1050,1104,1162,1224,1291,1363,1440,1523,1613,1710,1815,1928,2051,2184,2329,2486,2657,2844,3048,3271,3515,3782,4075,4397,4730,5074,5428,5792,6165,6546,6934,7329,7730,8136,8546,8959,9375,9793,10212,10632,11051,11469,11886,12301,12713,13122,13527,13928,14324,14715,15101,15481,15855,16223,16584,16939,17287,17628,17962,18288,18607,18918,19222,19519,19808,20090,20364,20631,20891,21143,21391,21634,21873,22107,22336,22561,22781,22997,23210,23421,23630,23836,24040,24242,24441,24638,24833,25025,25215,25402,25587,25770,25950,26128,26304,26477,26648,26817,26983,27147],filteredNfts:[],maxNftsPerPage:25,startIdx:1,imgResolutionIdx:0}},methods:{getInitialLevel:function(e){return e<10?10:2500==e?0:9-Math.floor(e/250)},getPower:function(e){return this.powerForLevel[this.nftInfo[e].level]},load:async function(e,t){let n=this;n.expandRange=!1,n.expandMaxNftsPerPage=!1,e<1&&(e=1),this.maxNftsPerPage=t,this.startIdx=e,n.filteredNfts=[];for(let a=e;a<Math.min(e+t,2500);a++)n.filteredNfts.push(a);console.log("calling filter")}},mounted:function(){this.load(1,this.maxNftsPerPage)}};const Fs=(0,U.Z)(Us,[["render",Is]]);var Bs=Fs,Rs={name:"App",components:{AllNfts:Bs},data(){return{pictureLink:["https://raw.githubusercontent.com/Surviville/Reaperville/master/png-low-res/","https://raw.githubusercontent.com/Surviville/Reaperville/master/png/"]}}};const Ds=(0,U.Z)(Rs,[["render",ss]]);var Ls=Ds;const zs={class:"content-body"},Hs={class:"container text-start"},Os={class:"col-xxl-12"},Vs=(0,s._)("div",{class:"card"},[(0,s._)("div",{class:"card-body"},[(0,s._)("h3",{class:"animate-characters"},"Notice"),(0,s._)("h5",{class:"text-muted"}," Click the envelope icons to show or hide the sections on this page. ")])],-1),Ws={class:"card"},Ys={class:"card-body"},qs={key:0},js=(0,s.Uk)(" How Staking Your Reaperville NFTs Works   "),$s={href:"#Staking"},Xs={id:"Staking"},Gs=(0,s.Uk)(" How Staking Your Reaperville NFTs Works   "),Zs={href:"#Staking"},Ks=(0,s._)("p",{class:"text-muted"}," Normally, when you stake one or multiple NFTs, you transfer the ownership of your NFTs to a smart contract which promises to transfer them back to you when you want to unstake your NFTs. ",-1),Qs=(0,s._)("h5",{class:"mt-3"},"We at Surviville do things differently!",-1),Js=(0,s._)("p",{class:"text-muted"}," When you stake a Reaperville NFT, the NFT remains in your wallet. That means, you don't have to transfer your NFTs to a different contract to stake them. However, when you decide to transfer a staked NFT to another wallet or an NFT marketplace, you need to unstake them first on this website in order to harvest your staking rewards. If you try to transfer a staked NFT without unstaking it first, the NFT is automatically unstaked for you, but you will not receive the staking rewards for this particular NFT since your last automatic or manual harvest. However, transferring staked NFTs also don't reset the penalties and reward cycle — which can be an advantage. However, transferring staked NFTs also don't reset the penalties and reward cycle. ",-1),ei=(0,s._)("br",null,null,-1),ti={key:2},ni=(0,s.Uk)(" How Many NFTs can you stake?   "),ai={href:"#HowMany"},si={id:"HowMany"},ii=(0,s.Uk)(" How Many NFTs can you stake?   "),ri={href:"#HowMany"},oi=(0,s._)("h5",{class:"text-muted"},"As many as you want!",-1),li=(0,s._)("p",{class:"text-muted"},"There are no limitations per wallet.",-1),di=(0,s._)("br",null,null,-1),ci={key:4},ui=(0,s.Uk)(" Advantages and Disadvantages   "),pi={href:"#Advantages",id:"Advantages"},hi=(0,s.Uk)(" Advantages and Disadvantages   "),mi={href:"#Advantages",id:"Advantages"},yi=(0,s._)("h5",null,"Advantages",-1),wi=(0,s._)("p",{class:"text-muted"}," Super low gas fees for staking and unstaking your NFTs. The staked NFTs remain in your wallet. No need to trust a smart contract with the custody of your NFTs. ",-1),gi=(0,s._)("br",null,null,-1),fi=(0,s._)("h5",null,"Disadvantages",-1),ki=(0,s._)("p",{class:"text-muted"}," You need to remember to unstake the NFTs which you want to transfer to another wallet or which you want to sell on Oasis. If you forget to unstake the NFTs before transferring them, you will lose the harvest of these NFTs since your last automatic or manual harvest, but the penalties and bonus cycle will not be restarted. ",-1),bi={class:"col-xxl-12"},vi={class:"card top-bid"},Ti={class:"card-body"},_i={class:"row align-items-center"},xi={class:"col align-items-center",id:"LevelUpgrades"},Ci={key:0},Mi=(0,s.Uk)(" NFT Level Upgrades   "),Pi={href:"#LevelUpgrades"},Si=(0,s.Uk)(" NFT Level Upgrades   "),Ni={href:"#LevelUpgrades"},Ai=(0,s.uE)('<ul><p class="text-muted"> You can permanently increase the staking power of your NFTs by upgrading the levels of any NFT you own. For level upgrades you need SVC tokens which you can earn by staking your NFTs or by buying them on MistSwap. Each level upgrade costs <strong>100 SVC tokens. </strong></p><p class="text-muted"> The maximum level is <strong>100. </strong></p><p class="text-muted"> Use the slider on the <a href="/my-reapers">staking and leveling website</a> to select the level you want to upgrade to. The website shows you a preview of the power after the upgrade. </p><p class="text-muted"><strong>100%</strong> of the SVC which is used for leveling NFTs is <strong>burned</strong>. </p></ul>',1),Ei={class:"col-xxl-12"},Ii={class:"card top-bid"},Ui={class:"card-body"},Fi={class:"row align-items-center"},Bi={class:"col align-items-center",id:"HarvestTypes"},Ri={key:0},Di=(0,s.Uk)(" Harvest Types   "),Li={href:"#HarvestTypes"},zi=(0,s.Uk)(" Harvest Types   "),Hi={href:"#HarvestTypes"},Oi=(0,s.uE)('<p class="text-muted"> Whenever you stake, unstake or upgrade one or multiple NFTs, a harvest of SVC reward tokens is automatically executed. Additionally, you can harvest SVC reward tokens whenever you want. This operation is called a <strong>manual harvest</strong>. </p><br><h3>Harvest Penalties and Bonuses</h3><h5>Penalties</h5><p class="text-muted"> If you harvest within the first 20 days of your first stake or your last manual harvest, the harvest amount is reduced by a penalty. The penalty applies to both automatic and manual harvests. Within the first day of staking, the penalty is 95% of the harvest amount. For each subsequent full day of staking, the penalty is reduced by 5 percentage points. That means, you will receive 10% after a full day of staking, 15% after 2 full days, 20% after 3 full days and so on. After 19 full days of staking your NFTs, you will receive 100% of the harvest amount. That means after 20 days there are no penalties on harvests. </p><br><h5>Bonus</h5><p class="text-muted"> But wait, that&#39;s not all: After 30 full days of staking, you will receive a 15% bonus. 👀 Note that each pure harvest and each unstake will reset the penalties and bonuses cycle. A stake or level upgrade will <strong>not</strong> reset the cycle. An automatic unstake due to an NFT transfer will also not reset the cycle. </p>',8);function Vi(e,t,n,a,i,r){return(0,s.wg)(),(0,s.iD)("div",zs,[(0,s._)("div",Hs,[(0,s._)("div",Os,[Vs,(0,s._)("div",Ws,[(0,s._)("div",Ys,[i.show["staking"]?((0,s.wg)(),(0,s.iD)(s.HY,{key:1},[(0,s._)("h3",Xs,[Gs,(0,s._)("a",Zs,[(0,s._)("i",{onClick:t[1]||(t[1]=e=>i.show["staking"]=!i.show["staking"]),title:"Hide text",class:"ri-mail-open-line"})])]),Ks,Qs,Js],64)):((0,s.wg)(),(0,s.iD)("h3",qs,[js,(0,s._)("a",$s,[(0,s._)("i",{onClick:t[0]||(t[0]=e=>i.show["staking"]=!i.show["staking"]),title:"Show text",class:"ri-mail-line"})])])),ei,i.show["howMany"]?((0,s.wg)(),(0,s.iD)(s.HY,{key:3},[(0,s._)("h3",si,[ii,(0,s._)("a",ri,[(0,s._)("i",{onClick:t[3]||(t[3]=e=>i.show["howMany"]=!i.show["howMany"]),title:"Hide text",class:"ri-mail-open-line"})])]),oi,li],64)):((0,s.wg)(),(0,s.iD)("h3",ti,[ni,(0,s._)("a",ai,[(0,s._)("i",{onClick:t[2]||(t[2]=e=>i.show["howMany"]=!i.show["howMany"]),title:"Show text",class:"ri-mail-line"})])])),di,i.show["advantages"]?((0,s.wg)(),(0,s.iD)(s.HY,{key:5},[(0,s._)("h3",null,[hi,(0,s._)("a",mi,[(0,s._)("i",{onClick:t[5]||(t[5]=e=>i.show["advantages"]=!i.show["advantages"]),title:"Hide text",class:"ri-mail-open-line"})])]),yi,wi,gi,fi,ki],64)):((0,s.wg)(),(0,s.iD)("h3",ci,[ui,(0,s._)("a",pi,[(0,s._)("i",{onClick:t[4]||(t[4]=e=>i.show["advantages"]=!i.show["advantages"]),title:"Show text",class:"ri-mail-line"})])]))])]),(0,s._)("div",bi,[(0,s._)("div",vi,[(0,s._)("div",Ti,[(0,s._)("div",_i,[(0,s._)("div",xi,[i.show["upgrades"]?((0,s.wg)(),(0,s.iD)(s.HY,{key:1},[(0,s._)("h3",null,[Si,(0,s._)("a",Ni,[(0,s._)("i",{onClick:t[7]||(t[7]=e=>i.show["upgrades"]=!i.show["upgrades"]),title:"Show text",class:"ri-mail-open-line"})])]),Ai],64)):((0,s.wg)(),(0,s.iD)("h3",Ci,[Mi,(0,s._)("a",Pi,[(0,s._)("i",{onClick:t[6]||(t[6]=e=>i.show["upgrades"]=!i.show["upgrades"]),title:"Show text",class:"ri-mail-line"})])]))])])])])]),(0,s._)("div",Ei,[(0,s._)("div",Ii,[(0,s._)("div",Ui,[(0,s._)("div",Fi,[(0,s._)("div",Bi,[i.show["harvest"]?((0,s.wg)(),(0,s.iD)(s.HY,{key:1},[(0,s._)("h3",null,[zi,(0,s._)("a",Hi,[(0,s._)("i",{onClick:t[9]||(t[9]=e=>i.show["harvest"]=!i.show["harvest"]),class:"ri-mail-open-line"})])]),Oi],64)):((0,s.wg)(),(0,s.iD)("h3",Ri,[Di,(0,s._)("a",Li,[(0,s._)("i",{onClick:t[8]||(t[8]=e=>i.show["harvest"]=!i.show["harvest"]),class:"ri-mail-line"})])]))])])])])])])])])}var Wi={data(){return{show:{}}},mounted:function(){for(const e of["staking","advantages","howMany","upgrades","harvest"])this.show[e]=!1}};const Yi=(0,U.Z)(Wi,[["render",Vi]]);var qi=Yi;const ji={class:"content-body"},$i={class:"container text-start"},Xi={class:"col-xxl-12"},Gi=(0,s._)("div",{class:"card"},[(0,s._)("div",{class:"card-body"},[(0,s._)("h3",{class:"animate-characters"},"Notice"),(0,s._)("h5",{class:"text-muted"}," Click the envelope icons to show or hide the sections on this page. ")])],-1),Zi={class:"card"},Ki={class:"card-body"},Qi={key:0},Ji=(0,s.Uk)(" Surviville Coin Tokenomics   "),er={href:"#SVC"},tr={id:"SVC"},nr=(0,s.Uk)(" Surviville Coin Tokenomics   "),ar={href:"#SVC"},sr=(0,s.Uk)(" Current token amount in existence: "),ir=(0,s.uE)('<p class="text-muted"> Total maximum supply: <strong>210 million SVC</strong></p><p class="text-muted"> The total maximum supply <strong>cannot be exceeded</strong>. </p><p class="text-muted"> The total maximum supply <strong>cannot be increased</strong>. </p><p class="text-muted"><strong>1 million SVC</strong> were minted to the project&#39;s wallet at the time the token was created. </p><p class="text-muted"> The goal was having enough supply to provide initial liquidity for SVC. </p><h4>There was <strong>no token presale</strong>.</h4><p class="text-muted"> BCH for the initial liquidity was taken from the Reaperville mint proceeds. </p><h4>There is <strong>no developer tax</strong> on SVC.</h4><h4><strong>100%</strong> of the SVC that are used for leveling NFTs are <strong>burned</strong>. </h4>',9),rr=(0,s._)("br",null,null,-1),or=(0,s._)("p",{class:"text-muted"}," In addition to the total max. supply mentioned above, each collection and subproject of Surviville has their own limits on how many SVC they can mint as rewards. ",-1),lr=(0,s._)("br",null,null,-1),dr=(0,s._)("p",{class:"text-muted"}," You can find more details on the already existing subprojects and collections below. ",-1),cr={class:"card"},ur={class:"card-body"},pr={key:0},hr=(0,s.Uk)(" Reaperville   "),mr={href:"#Reaperville"},yr={id:"Reaperville"},wr=(0,s.Uk)(" Reaperville   "),gr={href:"#Reaperville"},fr=(0,s._)("h4",{class:"mt-4"}," SVC is earnable as a reward token via Reaperville staking: ",-1),kr=(0,s._)("ul",null,[(0,s._)("p",{class:"text-muted"},[(0,s._)("strong",null,"1 million SVC"),(0,s.Uk)(" in the "),(0,s._)("strong",null,"first year")]),(0,s._)("p",{class:"text-muted"},[(0,s._)("strong",null,"2.5 million SVC"),(0,s.Uk)(" in the "),(0,s._)("strong",null,"first 3 years")]),(0,s._)("p",{class:"text-muted"},[(0,s.Uk)(" Lifetime rewards for Reaperville staking are limited to "),(0,s._)("strong",null,"5 million SVC")])],-1),br={class:"text-muted"},vr=(0,s.Uk)(" SVC "),Tr=(0,s._)("strong",null,"minted",-1),_r=(0,s.Uk)(" as staking rewards: "),xr=(0,s.Uk)(" until now "),Cr={class:"text-muted"},Mr=(0,s.Uk)(" SVC "),Pr=(0,s._)("strong",null,"burned",-1),Sr=(0,s.Uk)(" for level upgrades: "),Nr=(0,s.Uk)(" until now "),Ar={key:2,class:"mt-4"},Er=(0,s.Uk)(" Details on SVC Emission from Reaperville Staking   "),Ir={href:"#ReapervilleRewardTokenEmission"},Ur={class:"mt-4",id:"ReapervilleRewardTokenEmission"},Fr=(0,s.Uk)(" Details on Reward Token Emission   "),Br={href:"#ReapervilleRewardTokenEmission"},Rr={class:"text-muted"},Dr=(0,s.Uk)(" Current Reaperville total emission rate: "),Lr={class:"text-muted"},zr=(0,s._)("br",null,null,-1),Hr=(0,s._)("p",{class:"text-muted"}," All incurred penalties for automatic or manual harvests of the Reaperville NFT staking reduce the effective emission rate by up to 95%. ",-1),Or=(0,s._)("br",null,null,-1),Vr=(0,s._)("p",{class:"text-muted"}," If a staker harvests after qualifying for the 15% bonus for having staked the Reaperville NFTs for at least 30 days, this may increase the effective emission rate by up to 15%. ",-1),Wr=(0,s._)("br",null,null,-1),Yr={class:"mt-4"},qr=(0,s.Uk)(" Total staked power: "),jr=(0,s.Uk)("🔥 "),$r={class:"text-muted"},Xr=(0,s.Uk)(" Base staking power (used to adjust the reward token emission): "),Gr=(0,s._)("h4",null,"Summary of automatic token emission reduction",-1),Zr=(0,s._)("p",null,"Stake and upgrade add 1% to base staking power",-1),Kr=(0,s._)("p",null,"Unstake adds 5% to base staking power",-1),Qr=(0,s._)("p",null,"Emergency unstake adds 0% to base staking power",-1),Jr=(0,s._)("p",null," Manual adjustments may be necessary to reach the planned reward token emission ",-1),eo={class:"card"},to={class:"card-body"},no={key:0},ao=(0,s.Uk)(" Other Sub-Projects   "),so={href:"#OtherProjects"},io={id:"OtherProjects"},ro=(0,s.Uk)(" Other Sub-Projects   "),oo={href:"#Reaperville"},lo=(0,s._)("p",{class:"text-muted mt-4"}," Information about other sub-projects of the Surviville project will be published at a later point. ",-1),co=(0,s._)("br",null,null,-1),uo=(0,s._)("p",{class:"text-muted"},"Stay tuned!",-1);function po(e,t,n,a,r,o){return(0,s.wg)(),(0,s.iD)("div",ji,[(0,s._)("div",$i,[(0,s._)("div",Xi,[Gi,(0,s._)("div",Zi,[(0,s._)("div",Ki,[r.showTokenomics?((0,s.wg)(),(0,s.iD)(s.HY,{key:1},[(0,s._)("h2",tr,[nr,(0,s._)("a",ar,[(0,s._)("i",{onClick:t[1]||(t[1]=e=>r.showTokenomics=!r.showTokenomics),title:"Hide text",class:"ri-mail-open-line"})])]),(0,s._)("ul",null,[(0,s._)("h4",null,[sr,(0,s._)("strong",null,(0,i.zw)(Math.floor(r.rewardTokenTotalSupply/1e3)/1e3)+" million SVC ",1)]),ir]),rr,or,lr,dr],64)):((0,s.wg)(),(0,s.iD)("h2",Qi,[Ji,(0,s._)("a",er,[(0,s._)("i",{onClick:t[0]||(t[0]=e=>r.showTokenomics=!r.showTokenomics),title:"Show text",class:"ri-mail-line"})])]))])]),(0,s._)("div",cr,[(0,s._)("div",ur,[r.showReaperville?((0,s.wg)(),(0,s.iD)(s.HY,{key:1},[(0,s._)("h2",yr,[wr,(0,s._)("a",gr,[(0,s._)("i",{onClick:t[3]||(t[3]=e=>r.showReaperville=!r.showReaperville),title:"Hide text",class:"ri-mail-open-line"})])]),fr,kr,(0,s._)("h5",br,[vr,Tr,_r,(0,s._)("strong",null,(0,i.zw)(r.rewardTokenMinted4Reaper)+" SVC ",1),xr]),(0,s._)("h5",Cr,[Mr,Pr,Sr,(0,s._)("strong",null,(0,i.zw)(Math.round(1e6+r.rewardTokenMinted4Reaper-r.rewardTokenTotalSupply))+" SVC ",1),Nr])],64)):((0,s.wg)(),(0,s.iD)("h2",pr,[hr,(0,s._)("a",mr,[(0,s._)("i",{onClick:t[2]||(t[2]=e=>r.showReaperville=!r.showReaperville),title:"Show text",class:"ri-mail-line"})])])),r.showReapervilleRewardTokenEmission?((0,s.wg)(),(0,s.iD)(s.HY,{key:3},[(0,s._)("h3",Ur,[Fr,(0,s._)("a",Br,[(0,s._)("i",{onClick:t[5]||(t[5]=e=>r.showReapervilleRewardTokenEmission=!r.showReapervilleRewardTokenEmission),title:"Hide text",class:"ri-mail-open-line"})])]),(0,s._)("p",Rr,[Dr,(0,s._)("strong",null,(0,i.zw)(r.rewardTokenEmissionPerHour)+" SVC / hour @100% payout",1)]),(0,s._)("p",Lr," = "+(0,i.zw)(Math.round(24*r.rewardTokenEmissionPerHour*365/1e3)/1e3)+" million SVC / year ",1),zr,Hr,Or,Vr,Wr,(0,s._)("h4",Yr,[qr,(0,s._)("strong",null,(0,i.zw)(r.totalStakedPower),1),jr]),r.isAdmin?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[(0,s._)("h4",null,[(0,s._)("p",$r,[Xr,(0,s._)("strong",null,(0,i.zw)(r.baseStakingPower)+" == "+(0,i.zw)(Math.round(r.baseStakingPower/r.totalStakedPower*1e4)/100)+"%",1)])]),Gr,Zr,Kr,Qr,Jr],64)):(0,s.kq)("",!0)],64)):((0,s.wg)(),(0,s.iD)("h3",Ar,[Er,(0,s._)("a",Ir,[(0,s._)("i",{onClick:t[4]||(t[4]=e=>r.showReapervilleRewardTokenEmission=!r.showReapervilleRewardTokenEmission),title:"Show text",class:"ri-mail-line"})])]))])]),(0,s._)("div",eo,[(0,s._)("div",to,[r.showOtherProjects?((0,s.wg)(),(0,s.iD)(s.HY,{key:1},[(0,s._)("h2",io,[ro,(0,s._)("a",oo,[(0,s._)("i",{onClick:t[7]||(t[7]=e=>r.showOtherProjects=!r.showOtherProjects),title:"Hide text",class:"ri-mail-open-line"})])]),lo,co,uo],64)):((0,s.wg)(),(0,s.iD)("h2",no,[ao,(0,s._)("a",so,[(0,s._)("i",{onClick:t[6]||(t[6]=e=>r.showOtherProjects=!r.showOtherProjects),title:"Show text",class:"ri-mail-line"})])]))])])])])])}var ho={data(){return{showTokenomics:!1,showReaperville:!1,showReapervilleRewardTokenEmission:!1,showOtherProjects:!1,contracts:{},reaperBchBalance:0,reaperBchPerNft:"0",rewardTokenMintAllowance4NewMinter:1e4,addressTo:"",feedbackMessage:"",rewardTokenMintAllowance4Reaper:0,isAdmin:!1,reaperMintPaused:!1,reaperStakingPaused:!1,allowanceToSet:5e6,totalStakedPower:0,baseStakingPower:0,released:0,rewardTokenEmissionPerHour:0,rewardTokenTotalSupply:0,rewardTokenMinted4Reaper:0}},mounted:function(){this.provider=new E.Q(window.ethereum,"any"),this.provider.send("eth_requestAccounts",[]).then((()=>{this.signer=this.provider.getSigner(),this.contracts["svc"]=new Ge.CH(window.ca["svc"],Ke.Mt,this.signer),this.contracts["reaper"]=new Ge.CH(window.ca["reaper"],Qe.Mt,this.signer)})).then((()=>{this.contracts["reaper"].showStakerInfo(window.ca["dev"]).then((e=>{this.totalStakedPower=e[2],this.baseStakingPower=e[3],this.rewardTokenEmissionPerHour=String(Math.round(1e5*Ze.dF(e[4]))/1e5)})),this.contracts["svc"].remainingMintersAllowance(window.ca["reaper"]).then((e=>{this.rewardTokenMintAllowance4Reaper=String(e),this.rewardTokenMinted4Reaper=Math.round((5*10**24-Number(this.rewardTokenMintAllowance4Reaper))/10**15)/1e3})),this.contracts["svc"].totalSupply().then((e=>{this.rewardTokenTotalSupply=String(Math.round(e/10**15)/1e3)}))}))}};const mo=(0,U.Z)(ho,[["render",po]]);var yo=mo;function wo(e,t,n,a,i,r){const o=(0,s.up)("BuyCards"),l=(0,s.up)("PlayCards");return i.showBuying?((0,s.wg)(),(0,s.j4)(o,{key:0,onCardsBought:r.play,ref:"buyCardsRef"},null,8,["onCardsBought"])):((0,s.wg)(),(0,s.j4)(l,{key:1,cards2Play:i.cards2Play,tokensWon:i.tokensWonE18,gameStats:i.gameStats,onCardsPlayed:r.buy,ref:"playCardsRef"},null,8,["cards2Play","tokensWon","gameStats","onCardsPlayed"]))}const go={class:"text-center container col-lg-8 col-md-9 col-sm-10 mx-auto mt-2 mb-4"},fo=(0,s._)("h1",{class:"animate-characters"},"The Surviville Card Game",-1),ko=(0,s._)("h3",null,"Every card you play has a chance to 50x your money!",-1),bo={key:0},vo=(0,s.Uk)(" Detailed winning chances   "),To={href:"#WinningChances"},_o={id:"WinningChances",class:"mt-4"},xo=(0,s.Uk)(" Detailed winning chances   "),Co={href:"#WinningChances"},Mo=(0,s.uE)('<table class="mx-auto my-4" style="width:100%;"><tr><th style="width:50%;">Payout in % of Investment</th><th style="width:50%;">Slots</th></tr><tr><td>5,000%</td><td>1</td></tr><tr><td>2,500%</td><td>2</td></tr><tr><td>1,000%</td><td>3</td></tr><tr><td>500%</td><td>5</td></tr><tr><td>250%</td><td>10</td></tr><tr><td>200%</td><td>25</td></tr><tr><td>150%</td><td>200</td></tr><tr><td>125%</td><td>301</td></tr><tr><td>0%</td><td>669</td></tr></table>',1),Po=(0,s._)("h4",{class:"lead text-muted mx-auto my-3"},[(0,s._)("span",null,"You can play up to 50 cards per transaction. "),(0,s._)("span",null," Every card is drawn in a non-sequential, randomised order. "),(0,s._)("span",null," Once a card is drawn, it is not put back into the card pool. ")],-1),So={class:"mx-auto my-4",id:"cardsPlayed"},No={href:"#cardsPlayed"},Ao={key:0,title:"Reload numbers",class:"ri-refresh-fill"},Eo=(0,s._)("h4",{class:"lead text-muted mx-auto my-3"},[(0,s._)("span",null," Please select how many Surviville cards you want to mint. ")],-1),Io={class:"mb-3 mx-auto"},Uo={class:"input-group mx-auto"},Fo={class:"input-group-prepend mx-auto"},Bo=(0,s.Uk)("   "),Ro=(0,s.Uk)("   "),Do=(0,s.Uk)("   "),Lo=(0,s.Uk)("   "),zo=(0,s.Uk)("   "),Ho=(0,s.Uk)("   "),Oo=(0,s.Uk)("   "),Vo={class:"mb-3 mx-auto"},Wo={class:"input-group mx-auto"},Yo={class:"input-group-prepend mx-auto"},qo=["disabled"],jo={class:"col-lg-8 col-md-8 col-sm-8 mx-auto"},$o=["max"],Xo=["disabled"],Go={class:"row-lg-12"},Zo={class:"column"},Ko={key:0},Qo={key:1},Jo={class:"col-lg-6 col-md-8 mx-auto"},el=["disabled"],tl=(0,s.Uk)("   "),nl=["disabled"],al={key:1,class:"mt-4"},sl=(0,s._)("br",null,null,-1),il={class:"mt-4"},rl=(0,s._)("br",null,null,-1),ol=(0,s._)("h6",{class:"mx-auto text-muted"},[(0,s._)("span",null," Note that the transactions cannot be undone. ")],-1),ll=(0,s._)("br",null,null,-1),dl=(0,s._)("h6",{class:"mx-auto text-muted"},[(0,s._)("span",null," For increased efficiency all cards need to be played directly upon purchase and cannot be played at a later point in time. "),(0,s._)("span",null," All winnings are paid out immediately. ")],-1),cl={key:0,class:"popup"},ul={key:0,class:"text-monospace animate-popup"},pl=(0,s._)("br",null,null,-1),hl={key:1,class:"text-monospace animate-popup"};function ml(e,t,n,r,o,l){return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("section",go,[fo,o.remainingCards>0?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[(0,s._)("h3",null," For "+(0,i.zw)(o.bchPerCardE13/10**5)+" BCH or "+(0,i.zw)(o.svcPerCardE15/1e3)+" SVC you can play 1 card. ",1),ko,o.showWinningChances?((0,s.wg)(),(0,s.iD)(s.HY,{key:1},[(0,s._)("h4",_o,[xo,(0,s._)("a",Co,[(0,s._)("i",{onClick:t[1]||(t[1]=e=>o.showWinningChances=!o.showWinningChances),title:"Hide text",class:"ri-mail-open-line"})])]),Mo],64)):((0,s.wg)(),(0,s.iD)("h4",bo,[vo,(0,s._)("a",To,[(0,s._)("i",{onClick:t[0]||(t[0]=e=>o.showWinningChances=!o.showWinningChances),title:"Show text",class:"ri-mail-line"})])])),Po,(0,s._)("h2",So,[(0,s._)("span",null,(0,i.zw)(o.totalCards-o.remainingCards)+" of "+(0,i.zw)(o.totalCards)+" cards have been played. ",1),(0,s._)("a",No,[o.txInProgress?((0,s.wg)(),(0,s.iD)("i",Ao)):((0,s.wg)(),(0,s.iD)("i",{key:1,title:"Reload numbers",onClick:t[2]||(t[2]=e=>l.load()),class:"ri-refresh-fill"}))])]),Eo,(0,s._)("div",Io,[(0,s._)("div",Uo,[(0,s._)("div",Fo,[(0,s._)("button",{class:"btn btn-std",type:"button",onClick:t[3]||(t[3]=e=>l.setCards2Play(1))}," 1 "),Bo,(0,s._)("button",{class:"btn btn-std",type:"button",onClick:t[4]||(t[4]=e=>l.setCards2Play(5))}," 5 "),Ro,(0,s._)("button",{class:"btn btn-std",type:"button",onClick:t[5]||(t[5]=e=>l.setCards2Play(10))}," 10 "),Do,(0,s._)("button",{class:"btn btn-std",type:"button",onClick:t[6]||(t[6]=e=>l.setCards2Play(15))}," 15 "),Lo,(0,s._)("button",{class:"btn btn-std",type:"button",onClick:t[7]||(t[7]=e=>l.setCards2Play(20))}," 20 "),zo,(0,s._)("button",{class:"btn btn-std",type:"button",onClick:t[8]||(t[8]=e=>l.setCards2Play(30))}," 30 "),Ho,(0,s._)("button",{class:"btn btn-std",type:"button",onClick:t[9]||(t[9]=e=>l.setCards2Play(40))}," 40 "),Oo,(0,s._)("button",{class:"btn btn-std",type:"button",onClick:t[10]||(t[10]=e=>l.setCards2Play(50))}," 50 ")])])]),(0,s._)("div",Vo,[(0,s._)("div",Wo,[(0,s._)("div",Yo,[(0,s._)("button",{class:"btn btn-std",disabled:o.cards2Play<=1,onClick:t[11]||(t[11]=e=>l.changeCards2Play(-1))}," - ",8,qo),(0,s._)("div",jo,[(0,s.wy)((0,s._)("input",{id:"tokensToBuy",type:"number",min:"1",max:o.maxCardsPerTx,class:"form-control mx-auto",onChange:t[12]||(t[12]=e=>l.changeCards2Play(0)),"onUpdate:modelValue":t[13]||(t[13]=e=>o.cards2Play=e)},null,40,$o),[[a.nr,o.cards2Play]])]),(0,s._)("button",{class:"btn btn-std",disabled:o.cards2Play>=o.maxCardsPerTx,onClick:t[14]||(t[14]=e=>l.changeCards2Play(1))}," + ",8,Xo)])])]),(0,s._)("span",Go,[(0,s._)("span",Zo,[o.cards2Play>1?((0,s.wg)(),(0,s.iD)("h4",Ko,"Play "+(0,i.zw)(o.cards2Play)+" cards for:",1)):((0,s.wg)(),(0,s.iD)("h4",Qo,"Play 1 card for:")),(0,s._)("div",Jo,[(0,s._)("button",{id:"buyButtonBch",type:"button",class:"btn btn-std my-2 btn-large",disabled:o.contractPaused||o.bchPerCardE13<=0,onClick:t[15]||(t[15]=(...e)=>l.playWithBCH&&l.playWithBCH(...e))},(0,i.zw)(o.cards2Play*o.bchPerCardE13/10**5)+" BCH ",9,el),tl,(0,s._)("button",{id:"buyButtonSvc",type:"button",class:"btn btn-std my-2 btn-large",disabled:o.contractPaused||o.svcPerCardE15<=0,onClick:t[16]||(t[16]=e=>l.playWithToken("SVC"))},(0,i.zw)(o.cards2Play*o.svcPerCardE15/1e3)+" SVC ",9,nl)])])])],64)):((0,s.wg)(),(0,s.iD)("h2",al," All cards have been played! Please wait for the next round! ")),sl,(0,s._)("h3",il,[(0,s._)("span",null," Your Balances: "+(0,i.zw)(Math.round(o.playersBchBalanceE0/10**15)/1e3)+" BCH, "+(0,i.zw)(Math.round(o.playersRewardTokenBalanceE0/10**15)/1e3)+" SVC ",1)]),rl,ol,ll,dl]),""!=o.feedbackMessage||o.txInProgress?((0,s.wg)(),(0,s.iD)("div",cl,[(0,s._)("div",{class:"popupX",onClick:t[17]||(t[17]=e=>{o.feedbackMessage="",o.txInProgress=!1})}," x "),""!=o.feedbackMessage?((0,s.wg)(),(0,s.iD)("h4",ul,(0,i.zw)(o.feedbackMessage),1)):(0,s.kq)("",!0),pl,o.txInProgress?((0,s.wg)(),(0,s.iD)("h4",hl," Please wait for the transaction to finish! ")):(0,s.kq)("",!0)])):(0,s.kq)("",!0)],64)}var yl=n(7789),wl={name:"App",emits:["cardsBought"],data(){return{playersAddress:null,playersBchBalanceE0:0,playersRewardTokenBalanceE0:0,playersRewardTokenAllowanceE0:0,contracts:{},contractPaused:!1,remainingCards:0,totalCards:1215,bchPerCardE13:0,svcPerCardE15:0,cards2Play:10,maxCardsPerTx:50,showWinningChances:!1,feedbackMessage:"",txInProgress:!1}},methods:{setFeedback:function(e,t){let n=this;n.feedbackMessage=e,n.lastTimeout>0&&clearTimeout(n.lastTimeout),t>0&&(n.lastTimeout=setTimeout((function(){n.feedbackMessage=""}),t))},startGame:function(e){console.log("balance old",this.playersRewardTokenBalanceE0.toString());let t=this.playersRewardTokenBalanceE0;this.contracts["svc"].balanceOf(this.playersAddress).then((n=>{this.playersRewardTokenBalanceE0=yl.O$.from(n),console.log("balance new",this.playersRewardTokenBalanceE0.toString()),t=yl.O$.from(this.playersRewardTokenBalanceE0).sub(t).add(e),console.log("winningsE0",t.toString());let a=t.div(yl.O$.from(10).pow(18));a.lt(0)&&s>0&&(a=a.sub(1)),a=a.toNumber();let s=t.mod(yl.O$.from(10).pow(18));s=s.toNumber(),this.$emit("cardsBought",this.cards2Play,a,s)}))},playWithToken:async function(e){let t;switch(await this.load(),e){case"SVC":t=this.svcPerCardE15;break;default:this.setFeedback("Filter not implemented",2e3)}if(this.cards2Play>this.remainingCards)return this.feedbackMessage=`There are only ${this.remainingCards} cards available for minting!`,this.maxCardsPerTx=this.remainingCards,!1;let n=t*this.cards2Play,a=n.toString()+"000000000000000";const s=13e5,i=135e3,r=50,o=1;let l,d=Math.min(1e7,Math.ceil((s-i)*this.cards2Play/(r-o)+(r*i-o*s)/(r-o)*(1-(this.totalCards-this.remainingCards)/(5*this.totalCards))));if(console.log("totalCostTokenE15: ",n),console.log("Gas limit: ",d),this.playersRewardTokenAllowanceE0<Number(a)&&(console.log("allowance",this.playersRewardTokenAllowanceE0.toString()),console.log("totalCostTokenE0",a.toString()),this.setFeedback("Approving "+e+" first",2e3),await this.approveRewardToken()),this.playersRewardTokenBalanceE0.lt(a))return this.feedbackMessage=`You have ${Ze.fi(this.playersRewardTokenBalanceE0)} ${e} in your wallet. You can play up to ${Math.round(this.playersRewardTokenBalanceE0.div(yl.O$.from(this.svcPerCardE15).mul(10).pow(15))-.5)} cards with that.`,!1;this.feedbackMessage="Getting your cards. ",this.txInProgress=!0;try{l=await this.contracts["cards"].playWithToken(this.cards2Play,window.ca["svc"],a,{gasLimit:d.toString()}),await l.wait(),"SVC"===e?this.startGame(a):this.startGame("0")}catch(u){return this.setFeedback("An error occured. Please try again later.",2e3),this.txInProgress=!1,!1}console.log("tx hash:",l.hash);const c=await this.provider.getTransaction(l.hash);try{let e=await this.provider.call(c,c.blockNumber);console.log(e),"0x"==e&&(this.feedbackMessage="Congratulations! You successfully played some cards!",this.txInProgress=!1)}catch(u){this.setFeedback("An error occured.\nPlease try again later.",2e3),this.txInProgress=!1;const e=u.data.replace("Reverted ","");console.log({err:u});let t=Qt.ZN("0x"+e.substr(138));console.log("revert reason:",t)}},playWithBCH:async function(){if(await this.load(),this.cards2Play>this.remainingCards)return this.feedbackMessage=`There are only ${this.remainingCards} cards available for minting!`,this.maxCardsPerTx=this.remainingCards,!1;let e=this.bchPerCardE13*this.cards2Play,t=e.toString()+"000000000000000";const n=11e5,a=11e4,s=50,i=1;let r,o=Math.min(1e7,Math.ceil((n-a)*this.cards2Play/(s-i)+(s*a-i*n)/(s-i)*(1-(this.totalCards-this.remainingCards)/(5*this.totalCards))));if(console.log("totalCostmBch: ",e),console.log("Gas limit: ",o),this.playersBchBalanceE0<e*10**15+o)return this.feedbackMessage=`You have ${Math.round(this.playersBchBalanceE0/10**14)/1e4} BCH in your wallet. You can play up to ${Math.round(this.playersBchBalanceE0/Number(this.bchPerCardE13*10**13)-.5)} cards with that.`,!1;this.feedbackMessage="Getting your cards.",this.txInProgress=!0;try{r=await this.contracts["cards"].playWithBch(this.cards2Play,{value:t,gasLimit:o.toString()}),await r.wait(),this.startGame("0")}catch(d){return this.setFeedback("An error occured. Please try again later.",2e3),this.txInProgress=!1,!1}console.log("tx hash:",r.hash);const l=await this.provider.getTransaction(r.hash);try{let e=await this.provider.call(l,l.blockNumber);console.log(e),"0x"==e&&(this.feedbackMessage="Congratulations! You successfully played some cards!",this.txInProgress=!1)}catch(d){this.setFeedback("An error occured.\nPlease try again later.",2e3),this.txInProgress=!1;const e=d.data.replace("Reverted ","");console.log({err:d});let t=Qt.ZN("0x"+e.substr(138));console.log("revert reason:",t)}this.load()},approveRewardToken:async function(){let e=this;e.setFeedback("Approving EXP token",0),e.txInProgress=!0;let t=await e.contracts["svc"].approve(window.ca["cards"],ma.Bz,{gasLimit:65e3});await t.wait(),e.contracts["svc"].allowance(e.playersAddress,window.ca["cards"]).then((t=>{e.playersRewardTokenAllowanceE0=t})),e.feedbackMessage="",e.txInProgress=!1},removeRewardTokenAllowance:async function(){let e=this;e.setFeedback("Removing EXP token approval",2e3),e.txInProgress=!0;let t=await e.contracts["svc"].approve(window.ca["cards"],0,{gasLimit:65e3,gasPrice:104674e4});await t.wait(),e.contracts["svc"].allowance(e.playersAddress,window.ca["cards"]).then((t=>{e.playersRewardTokenAllowanceE0=t})),e.feedbackMessage="",e.txInProgress=!1},setCards2Play:function(e){this.feedbackMessage="",this.txInProgress=!1,this.cards2Play=Math.floor(e),this.cards2Play<1?this.cards2Play=1:this.cards2Play>this.maxCardsPerTx&&(this.cards2Play=this.maxCardsPerTx)},changeCards2Play:function(e){this.feedbackMessage="",this.txInProgress=!1,this.cards2Play=Math.floor(this.cards2Play)+e,this.cards2Play<1?this.cards2Play=1:this.cards2Play>this.maxCardsPerTx&&(this.cards2Play=this.maxCardsPerTx)},getBchBalance:function(){this.provider.getBalance(this.playersAddress).then((e=>{this.playersBchBalanceE0=e}))},getRewardTokenBalance:function(){this.contracts["svc"].balanceOf(this.playersAddress).then((e=>{this.playersRewardTokenBalanceE0=yl.O$.from(e),console.log(this.playersRewardTokenBalanceE0.toString())}))},getRewardTokenAllowance:function(){let e=this;e.contracts["svc"].allowance(e.playersAddress,window.ca["cards"]).then((t=>{e.playersRewardTokenAllowanceE0=t}))},load:function(){this.feedbackMessage="",this.txInProgress=!1,this.contracts["cards"].getInfo([window.ca["svc"]]).then((e=>{console.log(e),this.contractPaused=e[0]>0,this.remainingCards=e[1],this.totalCards=e[2],this.bchPerCardE13=e[3],this.svcPerCardE15=e[4]})),this.signer.getAddress().then((e=>{this.playersAddress=e,this.getBchBalance(),this.getRewardTokenBalance(),this.getRewardTokenAllowance()}))}},mounted:function(){this.provider=new E.Q(window.ethereum,"any"),this.provider.send("eth_requestAccounts",[]).then((()=>{this.signer=this.provider.getSigner(),this.contracts["svc"]=new Ge.CH(window.ca["svc"],Ke.Mt,this.signer),this.contracts["cards"]=new Ge.CH(window.ca["cards"],Je.Mt,this.signer),this.contracts["reaper"]=new Ge.CH(window.ca["reaper"],Qe.Mt,this.signer)})).then((()=>{this.load()}))}};const gl=(0,U.Z)(wl,[["render",ml]]);var fl=gl;const kl=e=>((0,s.dD)("data-v-492cf412"),e=e(),(0,s.Cn)(),e),bl={class:"text-center container col-lg-8 col-md-9 col-sm-10 mx-auto mt-2 mb-4"},vl=kl((()=>(0,s._)("h1",{class:"animate-characters"},"The Surviville Card Game",-1))),Tl={class:"mx-auto my-4"},_l=["onClick","src"],xl=["onClick","src"],Cl=["onClick","src"],Ml={class:"mt-4"},Pl={class:"row-lg-12"},Sl={class:"column"},Nl={class:"col-lg-6 col-md-8 mx-auto"},Al=(0,s.Uk)("   "),El={class:"row"},Il={class:"text-monospace col-lg-12 col-md-12 mx-auto"},Ul={class:"mx-auto my-4"},Fl=kl((()=>(0,s._)("hr",{class:"my-3"},null,-1))),Bl={class:"text-muted lead"};function Rl(e,t,n,a,r,o){return(0,s.wg)(),(0,s.iD)("section",bl,[vl,!1===r.showSummary?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[(0,s._)("table",Tl,[(0,s._)("tr",null,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(3,(e=>(0,s._)("td",{key:e},[(0,s._)("img",{class:"button",onClick:t=>o.uncoverField(e-1),src:r.imgArr[e-1]},null,8,_l)]))),64))]),(0,s._)("tr",null,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(3,(e=>(0,s._)("td",{key:e},[(0,s._)("img",{class:"button",onClick:t=>o.uncoverField(e+2),src:r.imgArr[e+2]},null,8,xl)]))),64))]),(0,s._)("tr",null,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(3,(e=>(0,s._)("td",{key:e},[(0,s._)("img",{class:"button",onClick:t=>o.uncoverField(e+5),src:r.imgArr[e+5]},null,8,Cl)]))),64))])]),(0,s._)("h1",Ml,"Card "+(0,i.zw)(r.currentCard)+" of "+(0,i.zw)(n.cards2Play),1),(0,s._)("span",Pl,[(0,s._)("span",Sl,[(0,s._)("div",Nl,[r.uncoveredWinningFields<3?((0,s.wg)(),(0,s.iD)("button",{key:0,class:"btn btn-std my-2 btn-large",onClick:t[0]||(t[0]=(...e)=>o.uncoverAllFields&&o.uncoverAllFields(...e))}," Uncover all fields ")):r.currentCard<n.cards2Play?((0,s.wg)(),(0,s.iD)("button",{key:1,class:"btn btn-std my-2 btn-large",onClick:t[1]||(t[1]=(...e)=>o.showNextCard&&o.showNextCard(...e))}," Show next card ")):((0,s.wg)(),(0,s.iD)("button",{key:2,class:"btn btn-std my-2 btn-large",onClick:t[2]||(t[2]=(...e)=>o.showNextCard&&o.showNextCard(...e))}," Play again ")),Al,(0,s._)("button",{class:"btn btn-std my-2 btn-large",onClick:t[3]||(t[3]=e=>{r.showSummary=!0,r.currentCard=n.cards2Play})}," Show Summary ")])])]),(0,s._)("div",El,[(0,s._)("h3",Il,(0,i.zw)(r.feedbackMessage),1)])],64)):(0,s.kq)("",!0),!0===r.showSummary?((0,s.wg)(),(0,s.iD)(s.HY,{key:1},[(0,s._)("table",Ul,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.winningsArr.length,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e,class:"text-muted lead"},(0,i.zw)(e)+". card won "+(0,i.zw)(r.winningsArr[e-1])+" SVC ",1)))),128)),Fl,(0,s._)("tr",Bl," Total won: "+(0,i.zw)(n.tokensWon),1)]),(0,s._)("button",{class:"btn btn-std my-2 btn-large",onClick:t[4]||(t[4]=(...e)=>o.showNextCard&&o.showNextCard(...e))}," Play again ")],64)):(0,s.kq)("",!0)])}const Dl=[5e3,2500,1e3,500,250,200,150,125,0];var Ll={name:"App",props:["cards2Play","tokensWon","gameStats"],emits:["cardsPlayed"],data(){return{currentCard:1,winningsArr:[],imgArr:[],uncoveredImgArr:[],uncoveredWinningFields:0,showSummary:!1,feedbackMessage:""}},methods:{shuffle:function(e){let t,n=e.length;while(0!=n)t=Math.floor(Math.random()*n),n--,[e[n],e[t]]=[e[t],e[n]];return e},showNextCard:function(){this.currentCard++,this.currentCard>this.cards2Play?this.$emit("cardsPlayed"):this.showCard(this.currentCard)},uncoverField:function(e){let t="images/cards/"+this.uncoveredImgArr[e]+".png";if(this.imgArr[e]===t)return!1;this.imgArr[e]=t,console.log(this.uncoveredImgArr[e],this.winningsArr[this.currentCard-1]),Number(this.uncoveredImgArr[e])===Number(this.winningsArr[this.currentCard-1])&&(this.uncoveredWinningFields+=1),this.uncoveredWinningFields>=3&&(this.feedbackMessage="This card wins "+this.winningsArr[this.currentCard-1]+" SVC")},uncoverAllFields:function(){for(let e=0;e<9;++e)this.uncoverField(e)},showCard:function(e){console.log(e);const t=this.winningsArr[e-1];console.log("cardWins",t),this.feedbackMessage="",this.uncoveredWinningFields=0,this.imgArr=[],this.uncoveredImgArr=[];for(let s=0;s<9;++s)this.imgArr.push("images/cards/svc.png");let n=[],a=[];for(let s=0;s<Dl.length;++s){let e=Dl[s];if(Number(e)!==Number(t))for(let t=1;t<=2;++t)a.push(e)}console.log("nonwinningNumbers",a),this.shuffle(a),n=a.slice(0,6),console.log(n);for(let s=1;s<=3;++s)n.push(t);this.shuffle(n),this.uncoveredImgArr=this.shuffle(n)},buildWinningsArr:function(e,t){console.log(e);let n=[];for(const[a,s]of Object.entries(e)){console.log(`${a}: ${s}`);for(let e=0;e<s;++e)n.push(a)}for(let a=n.length;a<t;++a)n.push(0);console.log("_winningsArr before shuffle",n),this.winningsArr=this.shuffle(n),console.log("winningsArr after shuffle",this.winningsArr),this.showCard(1)},simulateGame:function(){let e=50,t=9500,n=2073862;this.extractGameInfo(e,t,n)},extractGameInfo:function(e,t,n){console.log("PlayCards:extractGameInfo"),console.log("You played",e,"cards");let a="";if(t<=0)return a="Unfortunately, you did not win anything! Better luck next time!",a;a="Congratulations! You won "+t+" SVC. \n\n";const s=[2057701,542351,111701,16151,1351,51,1],i=[5e3,2500,1e3,500,250,200,150];let r={};for(let o=0;o<s.length;++o)r[i[o]]=Math.floor(n/s[o]),n-=s[o]*r[i[o]],t-=i[o]*r[i[o]],a+=r[i[o]]>0?r[i[o]]+"x "+i[o]+" won, ":"";r[125]=Math.floor(t/125),a+=r[125]>0?r[125]+"x 125 won ":"",console.log(r),t-125*r[125]!==0?(console.log("Calculation did not work"),console.log("Rest",t-125*r[125])):console.log("Calculation worked"),console.log(a),this.buildWinningsArr(r,e)}},mounted:function(){console.log("Play Cards mounted");let e=this.cards2Play,t=this.tokensWon,n=this.gameStats;for(let a=0;a<=9;++a)this.imgArr.push("images/cards/svc.png");this.extractGameInfo(e,t,n)}};const zl=(0,U.Z)(Ll,[["render",Rl],["__scopeId","data-v-492cf412"]]);var Hl=zl,Ol={name:"App",components:{BuyCards:fl,PlayCards:Hl},data(){return{cards2Play:50,tokensWonE18:0,gameStats:0,showBuying:!0}},methods:{play:function(e,t,n){console.log(e,"cards were bought. Playing cards now"),console.log(t,"tokens won -- gameStats=",n),this.cards2Play=e,this.tokensWonE18=t,this.gameStats=n,this.showBuying=!1},buy:function(){console.log("Cards were played. Switch back to buying cards now"),this.showBuying=!0}}};const Vl=(0,U.Z)(Ol,[["render",wo]]);var Wl=Vl;let Yl=(0,a.ri)(B);const ql=[{path:"/my-reapers",component:ns},{path:"/all-reapers",component:Ls},{path:"/admin",component:nt},{path:"/nftMint",component:tn},{path:"/info",component:qi},{path:"/tokenomics",component:yo},{path:"/cards",component:Wl},{path:"/",component:tn}],jl=(0,nn.p7)({history:(0,nn.PO)(),routes:ql});Yl.use(jl),Yl.mount("#app")},8677:function(){},2808:function(){}},t={};function n(a){var s=t[a];if(void 0!==s)return s.exports;var i=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=e,function(){n.amdO={}}(),function(){var e=[];n.O=function(t,a,s,i){if(!a){var r=1/0;for(c=0;c<e.length;c++){a=e[c][0],s=e[c][1],i=e[c][2];for(var o=!0,l=0;l<a.length;l++)(!1&i||r>=i)&&Object.keys(n.O).every((function(e){return n.O[e](a[l])}))?a.splice(l--,1):(o=!1,i<r&&(r=i));if(o){e.splice(c--,1);var d=s();void 0!==d&&(t=d)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[a,s,i]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,a){var s,i,r=a[0],o=a[1],l=a[2],d=0;if(r.some((function(t){return 0!==e[t]}))){for(s in o)n.o(o,s)&&(n.m[s]=o[s]);if(l)var c=l(n)}for(t&&t(a);d<r.length;d++)i=r[d],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(c)},a=self["webpackChunksurviville_staking"]=self["webpackChunksurviville_staking"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(2187)}));a=n.O(a)})();
//# sourceMappingURL=app.8ec75e78.js.map